import{j as e}from"./Example-zgwdEd5i.js";import{c as D}from"./ReactAppend-mx8-aehl.js";import{r as n}from"./useOutsideClick-TT1qJ6UJ.js";import{C as H}from"./CreateReactScript-VVPwJ0HX.js";import{H as O}from"./HtmlContent-Aen3UoIq.js";/* empty css             */import{s as u}from"./storage-zp2nPsZU.js";import{A as _}from"./Accordion2-Gpptojt8.js";import{c as U}from"./calcularTotal-FPqXOtx1.js";import{a as N}from"./axios-_sX4vCAy.js";import{S as v}from"./Profile-6kVS_QzG.js";import{r as Q}from"./server.browser-HbquNPx_.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-scAdndyK.js";import"./index-XJuWVQ-l.js";import"./main-Vi8adC25.js";/* empty css              */import"./tippy.esm-vXDZ6XwW.js";const K=({id:x,url_env:c,contenido:l})=>e.jsx("div",{className:"grid w-full gap-4  mt-6 ",children:e.jsx(O,{html:l})}),V=({datos:x,url_env:c})=>{const[l,g]=n.useState(null),[f,p]=n.useState([]),h=o=>{l===o?g(null):(g(o),f.includes(o)||p([...f,o]))};return e.jsx("div",{children:x.map((o,d)=>e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{id:`accordion-collapse-heading-${o.id}`,className:"",children:e.jsxs("button",{className:`flex items-center justify-between w-full p-4 font-medium rounded-t-xl  dark:focus:ring-gray-800 dark:border-gray-700 dark:text-black  dark:hover:bg-gray-800 gap-3 ${l===d?"bg-[#FF8555] text-white":"text-black bg-gray-100"}`,"data-accordion-target":`#accordion-collapse-body-${o.id}`,"aria-expanded":l===d,"aria-controls":`accordion-collapse-body-${o.id}`,type:"button",style:{transition:"all 500ms ease-in-out"},onClick:()=>h(d),children:[e.jsx("span",{children:o.name}),e.jsx("svg",{"data-accordion-icon":"",className:`w-3 h-3 shrink-0 ${l===d?"":"rotate-180"} stroke-[#FF8555]`,fill:"none",viewBox:"0 0 10 6",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),e.jsx("div",{id:`accordion-collapse-body-${o.id}`,className:`${l===d?"":"hidden"}`,"aria-labelledby":`accordion-collapse-heading-${o.id}`,children:e.jsx("div",{className:"p-5 border border-gray-200 dark:border-gray-700 dark:bg-gray-900",children:f.includes(d)&&e.jsx(K,{id:o.id,url_env:c,contenido:o.text})})})]},o.id))})};function G({quantity:x,Qadd:c,Qdelete:l}){return e.jsxs("div",{className:"flex gap-1 text-xs items-center self-start p-2 mt-5 text-lg font-medium text-white whitespace-nowrap bg-green-400 rounded-3xl min-h-[40px]",children:[e.jsx("button",{"aria-label":"Decrease quantity",className:"flex items-center justify-center w-6 h-6",onClick:l,children:e.jsx("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/f1f2ccb1fc035948188f4f836531e5d42a5237e6f40ac2776664db8bc2dcf291?placeholderIfAbsent=true&apiKey=b6f214df1e0f4f5eae4157d4f12e0ba3",alt:"",className:"object-contain w-6 aspect-square"})}),e.jsx("span",{className:"px-2 w-6 text-xs",children:x}),e.jsx("button",{"aria-label":"Increase quantity",className:"flex items-center justify-center w-6 h-6",onClick:c,children:e.jsx("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/915f3ca0393bd48d11d7a48ef12c1e451fbcb5d48740c98d58a14626bf02fa52?placeholderIfAbsent=true&apiKey=b6f214df1e0f4f5eae4157d4f12e0ba3",alt:"",className:"object-contain w-6 aspect-square"})})]})}const W=({complementos:x,points:c=0,historicoCupones:l})=>{var w,C,k,S;console.log(l);let g=structuredClone(c);const[f,p]=n.useState(u.Local.get("carrito")||[]),[h,o]=n.useState(0),[d,A]=n.useState(!0),[m,y]=n.useState(l??[]),[q,Y]=n.useState(x),[P,T]=n.useState({fecha:"",horario:"",opcion:"",complementos:[],imagen:""}),E=n.useRef(null);n.useEffect(()=>{l.length>0&&v.fire({title:"CupÃ³n de Descuento Activo",text:"Tienes un cupon de Descuento activo que aun no se ha utilizado, deseas aplicarlo? ",icon:"info",showCancelButton:!0,confirmButtonText:"No, gracias",cancelButtonText:"Si Aplicar"}).then(a=>{a.isConfirmed&&F(l[0].id)})},[]);const F=async a=>{try{const s=await N.delete(`/api/cupon/${a}`);console.log(s),y([])}catch(s){console.error("Error al eliminar cupon:",s)}},L=a=>{let s=u.Local.get("carrito")||[],t={},r=[];s.forEach(i=>{t[i.id]?t[i.id]++:t[i.id]=1});for(let i in t)t[i]>1&&r.push(i);if(r.length>0){let i=s.findIndex(B=>B.id===a);i>-1&&s.splice(i,1)}else s=s.filter(i=>i.id!==a);p(s),u.Local.set("carrito",s),limpiarHTML(),PintarCarrito()},R=a=>{let t=(u.Local.get("carrito")||[]).map(r=>(r.id===a&&(r.cantidad+=1),r));u.Local.set("carrito",t),p(t),limpiarHTML(),PintarCarrito()};n.useEffect(()=>{let a=u.Local.get("carrito")??[];p(a),limpiarHTML(),PintarCarrito()},[P]);const $=a=>{let t=(u.Local.get("carrito")||[]).map(r=>(r.id===a&&r.cantidad>0&&(r.cantidad-=1),r));u.Local.set("carrito",t),limpiarHTML(),PintarCarrito(),p(t)},b=()=>{A(!d)};n.useEffect(()=>{o(U(c))},[f]);const j=n.useRef(null),z=a=>{j.current=a.target.value,console.log(a.target.value)},I=async a=>{try{const s=await N.post("api/cupon",{id:a}),{data:t,status:r}=s;y([t.cupon]),console.log(t)}catch(s){console.error("Error al agregar cupon:",s)}},M=async()=>{try{const a=await N.post("api/cupones/validar",{cupon:j.current}),{data:s,status:t}=a;t==200&&v.fire({title:"CupÃ³n vÃ¡lido",text:"Â¿Deseas aplicar este cupÃ³n?",icon:"success",showCancelButton:!0,confirmButtonText:"Aplicar",cancelButtonText:"Cancelar"}).then(r=>{r.isConfirmed&&I(s.cupon.id)}),console.log(a)}catch(a){console.log(a.response),v.fire({title:"CupÃ³n invÃ¡lido",text:`${a.response.data.message}`,icon:"error"})}};return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"mb-24 font-b_slick_bold",children:e.jsxs("div",{className:"mt-12 px-[5%] md:px-[8%]",children:[e.jsx("span",{children:"Home / Aniversario / Suspendisse potenti /ValidaciÃ³n de pedido"}),e.jsx("div",{className:"mt-8",children:e.jsx("h1",{className:"text-[#112212] font-bold text-2xl md:text-4xl",children:"CARRITO DE COMPRAS"})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-20 mt-12",children:[e.jsxs("div",{className:"flex flex-col  md:basis-8/12 w-full md:w-auto",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[f.map(a=>{let s=0,t=structuredClone(a.cantidad);for(let r=0;r<a.cantidad&&g>=a.points;r++)g-=a.points,t--;return s=t*Number(a.precio).toFixed(0),e.jsxs("div",{className:`flex flex-col md:flex-row py-5  px-4 rounded-xl border-[#E8ECEF] gap-6 text-[#112212] border
                     hover:border-[#336234] group `,children:[e.jsx("img",{src:"/images/img/xcoral.png",type:"icon",onClick:()=>L(a.id),className:"flex w-5 h-5 cursor-pointer",alt:""}),e.jsx("img",{className:"h-full sm:h-[100px] aspect-square object-cover transform transition-transform duration-300 ease-in-out group-hover:scale-110",src:`/${a.imagen} `,alt:""}),e.jsxs("div",{className:"flex flex-row gap-4 w-full px-2",children:[e.jsxs("div",{className:"flex flex-col self-stretch w-52",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("h2",{className:"text-base lg:text-xl font-bold tracking-wider text-[#336234] line-clamp-2",children:a.producto}),e.jsx("p",{className:"mt-2 text-sm tracking-wide leading-5 text-neutral-900 text-opacity-80 line-clamp-2",children:a.extract})]}),e.jsxs("p",{className:"mt-5 text-xs font-bold tracking-wide text-neutral-900",children:["SKU: ",a.sku]}),e.jsx(G,{quantity:a.cantidad,Qadd:()=>R(a.id),Qdelete:()=>$(a.id)})]}),e.jsxs("div",{className:"grid grid-cols-2 w-full",children:[e.jsx("div",{className:"col-span1",children:e.jsxs("div",{className:"flex flex-col font-bold text-[#112212] items-center justify-center content-end",children:[e.jsx("span",{className:"text-base lg:text-xl font-bold tracking-wider text-[#336234] line-clamp-2",children:"Precio"}),e.jsxs("span",{className:"text-center",children:["S/. ",Number(a.precio).toFixed(0),a.usePoints&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-orange-500 text-sm",children:"Usando puntos"})]})]})]})}),e.jsx("div",{className:"col-span1",children:e.jsxs("div",{className:"flex flex-col  font-bold text-[#112212] items-end content-end",children:[e.jsx("span",{className:"text-base lg:text-xl font-bold tracking-wider text-[#336234] line-clamp-2",children:"Total"}),e.jsx("span",{children:s.toFixed(0)})]})})]})]})]})}),e.jsx("hr",{})]})}),e.jsx("div",{className:"mt-4"}),e.jsx(V,{datos:[{id:1,name:"Programa de Puntos",text:Q(e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl text-black mb-4",children:"Bienvenido a nuestro programa de recompensas FLORIPUNTOS LAS DONAS ðŸŒ¸ðŸ©"}),e.jsx("p",{className:"mb-4 text-black/75",children:"queremos agradecerte por elegirnos para tus momentos especiales. Ahora, cada vez que compres con nosotros, ganarÃ¡s FLORIPUNTOS que podrÃ¡s canjear por complementos que harÃ¡n tus arreglos florales aÃºn mÃ¡s espectaculares."}),e.jsx("p",{className:"mb-4 text-black/75",children:"Â¡Es nuestra manera de decirte gracias por ser parte de nuestra familia! ðŸŒ·â¤ï¸"}),e.jsx("h2",{className:"text-xl text-black mb-3",children:"Â¿CÃ³mo Funciona? ðŸŽ¯"}),e.jsxs("ul",{className:"list-disc pl-6 mb-4 space-y-2 text-black/75",children:[e.jsxs("li",{children:[e.jsx("span",{className:"text-black",children:"Acumula fÃ¡cilmente"}),": S/10 en compras = 1 floripunto. Â¡AsÃ­ de simple! ðŸ’¡"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-black",children:"Â¡Los Floripuntos no vencen!"})," EstÃ¡n listos para usarse cuando quieras. No hay prisa, guÃ¡rdalos y Ãºsalos cuando mÃ¡s te convenga. â³"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-black",children:"Canjea por complementos"}),": Usa tus floripuntos para aÃ±adir ese toque especial a tu pedido. Â¿Quieres agregar un delicioso chocolate ðŸ«, un globo ðŸŽˆ, o un adorable peluche ðŸ§¸? Â¡Hazlo con tus floripuntos y eleva tu regalo al siguiente nivel!"]}),e.jsxs("li",{children:[e.jsx("span",{className:"text-black",children:"Cuantas mÃ¡s compras realices, mÃ¡s floripuntos"})," acumulas. Â¡Y mÃ¡s floripuntos significa mÃ¡s maneras de sorprender a tus seres queridos! ðŸŽ"]})]}),e.jsx("p",{className:"text-lg text-black mb-4",children:"Â¡Empieza a Acumular Floripuntos Hoy! ðŸŒº"}),e.jsx("p",{className:"mb-4 text-black/75",children:"Haz tu primera compra y comienza a sumar puntos que te permitirÃ¡n personalizar tus arreglos con detalles que enamoran."})]}))},{id:2,name:"Nuestra Promesa",text:`En Las DoÃ±as, nos comprometemos a crear no solo un arreglo floral, sino un detalle que marque la diferencia. Cada una de nuestras creaciones estÃ¡ elaborada con flores naturales, frescas y de alta calidad, cuidadosamente seleccionadas para asegurarte la mejor experiencia.
                    Cada detalle es Ãºnico, porque las flores naturales tienen su propio carÃ¡cter. Sus formas, colores y texturas pueden variar, lo que hace que cada arreglo sea una obra irrepetible. Aunque las imÃ¡genes de nuestros productos buscan reflejar con precisiÃ³n lo que recibirÃ¡s, las particularidades de cada flor hacen que tu arreglo sea siempre especial y exclusivo.
                    Es nuestro compromiso hacer de cada entrega un gesto inolvidable, lleno de belleza y emociÃ³n.
                    `}]})]}),e.jsxs("div",{className:"basis-4/12 flex flex-col justify-start gap-5",children:[e.jsx("h2",{className:"font-bold text-[16px] text-[#151515]",children:"CÃ³digo de promociÃ³n"}),e.jsxs("div",{className:"flex gap-5 relative",children:[e.jsx("input",{defaultValue:j.current,type:"text",id:"txtCodigoPromocion",name:"txtCodigoPromocion",className:"w-full border-[#336234] rounded-3xl py-3 px-5 focus:outline-none focus:ring-2 focus:ring-[#336234]",onChange:z}),e.jsx("button",{onClick:M,className:"absolute rounded-3xl border right-[3%] p-2 px-4 text-white bg-[#336234] w-[113px] top-1/2 transform -translate-y-1/2",children:"Aplicar"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-7 ",children:[e.jsx("h2",{className:"font-bold text-[16px] text-[#a78f8f]",children:"Resumen del pedido "}),e.jsxs("div",{className:"flex flex-row gap-4 mt-4",children:[e.jsxs("div",{className:"w-8/12 text-[#112212] flex flex-col",children:[m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-80",children:" SubTotal"}),e.jsx("span",{id:"itemTotal",className:"opacity-80",children:"Descuento"})]}),e.jsx("span",{className:"font-bold",children:"Sub Total"})]}),e.jsxs("div",{className:"w-4/12 flex flex-col justify-end items-end px-4 font-bold",children:[e.jsxs("span",{className:"opacity-80",children:["S/ ",Number(h)]}),m.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-80",children:((C=(w=m[0])==null?void 0:w.cupon)==null?void 0:C.porcentaje)==1?`${Number(m[0].cupon.monto).toFixed(0)} %`:`S/ ${m[0].cupon.monto}`}),e.jsx("span",{className:"text-[#112212] font-bold text-nowrap",id:"itemsTotal",children:((S=(k=m[0])==null?void 0:k.cupon)==null?void 0:S.porcentaje)==1?`S/  ${Number(h)-Number(h)*Number(m[0].cupon.monto).toFixed(0)/100} `:`S/ ${Number(h)-Number(m[0].cupon.monto)}`})]})]})]})]}),e.jsx("hr",{}),e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("a",{id:"btnSiguiente",href:"/pago",className:"h-[54px] text-[#336234] hover:text-white bg-white hover:bg-[#336234] transition-colors duration-300 border border-[#336234] w-full py-4 rounded-3xl cursor-pointer font-semibold text-[16px] inline-block text-center",children:"Realizar Pedido"}),e.jsx("a",{href:"/catalogo",className:"h-[54px] text-[#336234] hover:text-white bg-white hover:bg-[#336234] transition-colors duration-300 border border-[#336234] w-full py-4 rounded-3xl cursor-pointer font-semibold text-[16px] inline-block text-center",children:"Seguir comprando"})]})})]})]})]})}),e.jsxs("div",{id:"modalComplementos",className:d?"block ease-in ":"hidden",children:[e.jsx("div",{className:" fixed inset-0 z-30 bg-gray-500 bg-opacity-75 transition-opacity",onClick:b}),e.jsx("div",{className:" fixed inset-0 z-30 w-screen overflow-y-auto ",onClick:b,children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsx("div",{onClick:a=>a.stopPropagation(),ref:E,className:"relative font-b_slick_bold transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl",children:e.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start w-full",children:e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("h2",{className:"text-lg font-bold leading-6 text-gray-900 mb-2",id:"modal-title",children:"Complementa tu pedido"}),e.jsx("img",{src:"/images/img/xcoral.png",alt:"",className:"h-5 cursor-pointer",onClick:b})]}),e.jsx("div",{className:"mt-5 gap-4 ",id:"containerComplementos","data-accordion":"collapse",children:e.jsx(_,{datos:q,setDetallePedido:T,setCarrito:p})})]})})})})})})]})]})};H((x,c)=>{D(x).render(e.jsx(W,{...c}))});
