import{j as e}from"./Example-zgwdEd5i.js";import{c as ue}from"./ReactAppend-mx8-aehl.js";import{r as o}from"./useOutsideClick-TT1qJ6UJ.js";import{C as me}from"./CreateReactScript-VVPwJ0HX.js";import{C as xe}from"./Card-eNbsL1sp.js";import{a as fe}from"./axios-_sX4vCAy.js";/* empty css             */import"./index-XJuWVQ-l.js";import{P as he}from"./ProductCard-2IBXtfot.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-scAdndyK.js";import"./main-Vi8adC25.js";import"./storage-zp2nPsZU.js";/* empty css              */const ge=({categorias:f,selected_category:m,categoria:d,url_env:X,beneficios:Y,tipoFloresList:Z})=>{let j=new AbortController;const[T,z]=o.useState([]),[r,h]=o.useState(m?{category_id:[m]}:{}),[je,ee]=o.useState(0),[x,w]=o.useState(1),[te,I]=o.useState("Cargar mas productos"),[g,V]=o.useState(""),[se,re]=o.useState(!0),[y,C]=o.useState(!1),[L,A]=o.useState(""),[$,q]=o.useState(d?d.name:""),[D,H]=o.useState(""),[v,N]=o.useState(!1),[p,u]=o.useState({categories:m?[{id:`${d.id}`,name:d.name}]:[],priceOrder:"",tipoFlor:[]}),[F,B]=o.useState(d||{}),[_,S]=o.useState(!1),k=o.useRef({}),U=o.useRef({}),J=o.useRef({}),oe=()=>{N(!v)},ie=()=>{S(!_)};o.useState(!1),o.useRef(!1);const ae=(t=[],s)=>{const i=[];return t.forEach((a,b)=>{b==0?i.push(a):i.push(s,a)}),i},le=()=>{C(!y)};function W(t){const s=t?`/catalogo/${t}`:"/catalogo";window.history.pushState(null,"",s)}const P=o.useRef(null),O=o.useRef(null),E=o.useRef(null),G=t=>{P.current&&!P.current.contains(t.target)&&N(!1),O.current&&!O.current.contains(t.target)&&S(!1),E.current&&!E.current.contains(t.target)&&C(!1)};o.useEffect(()=>(document.addEventListener("mousedown",G),()=>{document.removeEventListener("mousedown",G)}),[]);const ne=t=>{N(!v);const s=t.target.id,i=U.current[s].querySelector("span").textContent;B(f.find(a=>a.id==s)),W(s),q(i),!p.categories.find(a=>a.id==s)&&(u(a=>({...a,categories:[{id:s,name:i}]})),h(a=>({...a,category_id:[s]})))},ce=t=>{S(!_);const s=t.target.id,i=J.current[s].querySelector("span").textContent;H(i),!p.tipoFlor.find(a=>a.id==s)&&(u(a=>({...a,tipoFlor:[{id:s,name:i}]})),h(a=>({...a,tipoFlor:[s]})))};o.useEffect(()=>{w(1),R()},[r]),o.useEffect(()=>{R()},[x]);const K=t=>{C(!y);let s=t.target.id,i=k.current[s].querySelector("span").textContent;A(i),V(a=>t.target.value),u(a=>({...a,priceOrder:t.target.value}))};o.useEffect(()=>{w(1),R()},[g]);const de=t=>{q("Ocasiones"),W(null),B({}),u(s=>({...s,categories:s.categories.filter(i=>i.id!==t)})),h(s=>({...r,category_id:r.category_id.filter(i=>i!==t)}))},M=()=>{A("Ordenar por"),u(t=>({...t,priceOrder:""})),V("")},pe=()=>{H("Tipo de Flor"),u(t=>({...t,tipoFlor:[]})),h(t=>({...r,tipoFlor:[]}))},R=async()=>{j.abort("some"),j=new AbortController;let t=j.signal;I("Cargando ...");const s=[];let i=[];if(g&&(g==="price_high"?i.push({selector:"products.preciofiltro",desc:!0}):g==="price_low"?i.push({selector:"products.preciofiltro",desc:!1}):i.push({selector:"products.created_at",desc:!0})),s.push(["products.descuento",">",0]),(r.maxPrice||r.minPrice)&&(r.maxPrice&&r.minPrice?s.push([[["preciofiltro",">=",r.minPrice]],"and",[["preciofiltro","<=",r.maxPrice]]]):r.minPrice?s.push([["precio",">=",r.minPrice],"or",["descuento",">=",r.minPrice]]):r.maxPrice&&s.push([["precio","<=",r.maxPrice],"or",["descuento","<=",r.maxPrice]])),r.collections&&r.collections.length>0){const l=[];r.collections.forEach((n,c)=>{c===0?l.push(["collection_id","=",n]):l.push("or",["collection_id","=",n])}),s.push(l)}if(r.sizes&&r.sizes.length>0){const l=[];r.sizes.forEach((n,c)=>{c===0?l.push(["combinaciones.talla_id","=",n]):l.push("or",["combinaciones.talla_id","=",n])}),s.push(l)}if(r.colors&&r.colors.length>0){const l=[];r.colors.forEach((n,c)=>{c===0?l.push(["combinaciones.color_id","=",n]):l.push("or",["combinaciones.color_id","=",n])}),s.push(l)}if(r.tipoFlor&&r.tipoFlor.length>0){const l=[];r.tipoFlor.forEach((n,c)=>{c===0?l.push(["tipo_flor_id","=",n]):l.push("or",["tipo_flor_id","=",n])}),s.push(l)}if(r.category_id&&r.category_id.length>0){const l=[];r.category_id.forEach((n,c)=>{c===0?l.push(["categoria_id","=",n]):l.push("or",["categoria_id","=",n])}),s.push(l)}const a=await fe.post("/api/products/paginate",{requireTotalCount:!0,filter:ae([...s,["products.visible","=",!0]],"and"),take:12,skip:12*(x-1),sort:i},{headers:{"Content-Type":"application/json"},signal:t}),{data:b,totalCount:Q}=a.data;x==1?z(b??[]):z([...T,...b]),I("Cargar más +"),ee(Q??0),12*x>=Q&&re(!1)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mb-24",children:e.jsxs("div",{className:"mt-14 px-[5%] lg:px-[8%] font-b_slick_bold",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"text-[#FE4A11] text-base tracking-normal uppercase",children:[" ",`Inicio / ${F.name??"Todas las categorias"} `]}),e.jsx("div",{className:"text-3xl lg:text-5xl font-bold text-[#112212] uppercase tracking-wider",children:F.name}),e.jsx("div",{className:"text-[#112212] opacity-80 font-b_slick_regular text-lg",children:F.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 mt-4 lg:mt-12 gap-4 lg:gap-10",children:[e.jsxs("div",{className:"dropdown w-full",ref:P,children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:oe,children:$||"Ocasiones"}),v&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:f.map((t,s)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:ne}),e.jsx("label",{ref:i=>U.current[t.id]=i,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]},s))})]}),e.jsxs("div",{className:"dropdown w-full",ref:O,children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:ie,children:D||"Tipo de Flor"}),_&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:Z.map((t,s)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:ce}),e.jsx("label",{ref:i=>J.current[t.id]=i,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]},s))})]}),e.jsxs("div",{className:"dropdown w-full",ref:E,children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:le,children:L||"Ordenar por"}),y&&e.jsxs("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms]",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:[e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id11",className:"radio",value:"price_high",onChange:K}),e.jsx("label",{ref:t=>k.current.id11=t,htmlFor:"id11",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más alto"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id12",className:"radio",value:"price_low",onChange:K}),e.jsx("label",{ref:t=>k.current.id12=t,htmlFor:"id12",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más bajo"})})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-7",children:[p.categories.map((t,s)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:()=>de(`${t.id}`),children:["Categoria - ",t.name,e.jsx("img",{src:"/img_donas/x.png",type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),p.priceOrder&&(p.priceOrder==="price_high"?e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:M,children:["Orden - Ascendente",e.jsx("img",{src:"/img_donas/x.png",type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}):e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:M,children:["Orden - Descendente",e.jsx("img",{src:"/img_donas/x.png",type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),p.tipoFlor.map((t,s)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:pe,children:["Tipo de Flor - ",t.name,e.jsx("img",{src:"/img_donas/x.png",type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}))]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-5 mt-16",children:T.map((t,s)=>e.jsx(he,{...t},`product-${s}`))}),e.jsx("div",{className:"flex flex-row w-full items-center justify-center mt-12",children:se&&e.jsx("button",{type:"button",onClick:()=>w(x+1),className:"rounded-full border-2 bg-white shadow-xl border-[#336234] text-[#336234] p-2 px-3 font-bold",children:te})}),e.jsx("div",{className:"mt-14 font-b_slick_bold w-full",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-7 justify-between",children:Y.map((t,s)=>e.jsx(xe,{item:t,url:X}))})})]})})})};me((f,m)=>{ue(f).render(e.jsx(ge,{...m}))});
