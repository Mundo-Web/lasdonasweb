import{j as e}from"./Example-zgwdEd5i.js";import{c as T}from"./ReactAppend-mx8-aehl.js";import{r as c}from"./useOutsideClick-TT1qJ6UJ.js";import{C as $}from"./CreateReactScript-OQMMn-O_.js";/* empty css             */import{s as m}from"./storage-zp2nPsZU.js";import{A as M}from"./Accordion2-1IUm3Q-f.js";import{c as I}from"./calcularTotal-FPqXOtx1.js";import{B as q}from"./Button-Kf83L5Z1.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-TJU9eeEG.js";import"./axios-_sX4vCAy.js";import"./index-XJuWVQ-l.js";/* empty css              */const z=({id:d,url_env:x,contenido:s})=>e.jsx("div",{className:"grid w-full gap-4  mt-6",children:s}),_=({datos:d,url_env:x})=>{const[s,u]=c.useState(null),[p,h]=c.useState([]),f=a=>{s===a?u(null):(u(a),p.includes(a)||h([...p,a]))};return e.jsx("div",{children:d.map((a,o)=>e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{id:`accordion-collapse-heading-${a.id}`,className:"",children:e.jsxs("button",{className:`flex items-center justify-between w-full p-4 font-medium rounded-t-xl  dark:focus:ring-gray-800 dark:border-gray-700 dark:text-black  dark:hover:bg-gray-800 gap-3 ${s===o?"bg-[#FF8555] text-white":"text-black bg-gray-100"}`,"data-accordion-target":`#accordion-collapse-body-${a.id}`,"aria-expanded":s===o,"aria-controls":`accordion-collapse-body-${a.id}`,type:"button",style:{transition:"all 500ms ease-in-out"},onClick:()=>f(o),children:[e.jsx("span",{children:a.name}),e.jsx("svg",{"data-accordion-icon":"",className:`w-3 h-3 shrink-0 ${s===o?"":"rotate-180"} stroke-[#FF8555]`,fill:"none",viewBox:"0 0 10 6",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5 5 1 1 5"})})]})}),e.jsx("div",{id:`accordion-collapse-body-${a.id}`,className:`${s===o?"":"hidden"}`,"aria-labelledby":`accordion-collapse-heading-${a.id}`,children:e.jsx("div",{className:"p-5 border border-gray-200 dark:border-gray-700 dark:bg-gray-900",children:p.includes(o)&&e.jsx(z,{id:a.id,url_env:x,contenido:a.text})})})]},a.id))})};function B({quantity:d,Qadd:x,Qdelete:s}){return e.jsxs("div",{className:"flex gap-1 text-xs items-center self-start p-2 mt-5 text-lg font-medium text-white whitespace-nowrap bg-green-400 rounded-3xl min-h-[40px]",children:[e.jsx("button",{"aria-label":"Decrease quantity",className:"flex items-center justify-center w-6 h-6",onClick:s,children:e.jsx("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/f1f2ccb1fc035948188f4f836531e5d42a5237e6f40ac2776664db8bc2dcf291?placeholderIfAbsent=true&apiKey=b6f214df1e0f4f5eae4157d4f12e0ba3",alt:"",className:"object-contain w-6 aspect-square"})}),e.jsx("span",{className:"px-2 w-6 text-xs",children:d}),e.jsx("button",{"aria-label":"Increase quantity",className:"flex items-center justify-center w-6 h-6",onClick:x,children:e.jsx("img",{loading:"lazy",src:"https://cdn.builder.io/api/v1/image/assets/TEMP/915f3ca0393bd48d11d7a48ef12c1e451fbcb5d48740c98d58a14626bf02fa52?placeholderIfAbsent=true&apiKey=b6f214df1e0f4f5eae4157d4f12e0ba3",alt:"",className:"object-contain w-6 aspect-square"})})]})}const O=({complementos:d,points:x=0,historicoCupones:s})=>{var v,w,y,k,C,S;let u=structuredClone(x);const[p,h]=c.useState(m.Local.get("carrito")||[]),[f,a]=c.useState(0),[o,L]=c.useState(!0),[N,D]=c.useState(d),[H,P]=c.useState({fecha:"",horario:"",opcion:"",complementos:[],imagen:""}),j=c.useRef(null),b=t=>{j.current&&!j.current.contains(t.target)&&g()};c.useEffect(()=>(o?document.addEventListener("mousedown",b):document.removeEventListener("mousedown",b),()=>{document.removeEventListener("mousedown",b)}),[o]);const E=t=>{let i=m.Local.get("carrito")||[],l={},r=[];i.forEach(n=>{l[n.id]?l[n.id]++:l[n.id]=1});for(let n in l)l[n]>1&&r.push(n);if(r.length>0){let n=i.findIndex(F=>F.id===t);n>-1&&i.splice(n,1)}else i=i.filter(n=>n.id!==t);h(i),m.Local.set("carrito",i),limpiarHTML(),PintarCarrito()},R=t=>{let l=(m.Local.get("carrito")||[]).map(r=>(r.id===t&&(r.cantidad+=1),r));m.Local.set("carrito",l),h(l),limpiarHTML(),PintarCarrito()},A=t=>{let l=(m.Local.get("carrito")||[]).map(r=>(r.id===t&&r.cantidad>0&&(r.cantidad-=1),r));m.Local.set("carrito",l),limpiarHTML(),PintarCarrito(),h(l)},g=()=>{L(!o)};return c.useEffect(()=>{a(I(x))},[p]),e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"mb-24 font-b_slick_bold",children:e.jsxs("div",{className:"mt-12 px-[5%] md:px-[8%]",children:[e.jsx("span",{children:"Home / Aniversario / Suspendisse potenti /Validación de pedido"}),e.jsx("div",{className:"mt-8",children:e.jsx("h1",{className:"text-[#112212] font-bold text-2xl md:text-4xl",children:"CARRITO DE COMPRAS"})}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-20 mt-12",children:[e.jsxs("div",{className:"flex flex-col  md:basis-8/12 w-full md:w-auto",children:[e.jsx("div",{className:"w-full",children:e.jsxs("div",{className:"flex flex-col gap-5",children:[p.map(t=>{let i=0,l=structuredClone(t.cantidad);for(let r=0;r<t.cantidad&&u>=t.points;r++)u-=t.points,l--;return i=l*Number(t.precio),e.jsxs("div",{className:`flex flex-col md:flex-row py-5  px-4 rounded-xl border-[#E8ECEF] gap-6 text-[#112212] border
                     hover:border-[#336234] group `,children:[e.jsx("img",{src:"/images/img/xcoral.png",type:"icon",onClick:()=>E(t.id),className:"flex w-5 h-5 cursor-pointer",alt:""}),e.jsx("img",{className:"h-[100px] aspect-square object-cover transform transition-transform duration-300 ease-in-out group-hover:scale-110",src:`/${t.imagen} `,alt:""}),e.jsxs("div",{className:"flex flex-row gap-4 w-full px-2",children:[e.jsxs("div",{className:"flex flex-col self-stretch w-52",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("h2",{className:"text-base font-bold tracking-wider text-neutral-900",children:t.producto}),e.jsx("p",{className:"mt-2 text-sm tracking-wide leading-5 text-neutral-900 text-opacity-80 line-clamp-2",children:t.extract})]}),e.jsxs("p",{className:"mt-5 text-xs font-bold tracking-wide text-neutral-900",children:["SKU: ",t.sku]}),e.jsx(B,{quantity:t.cantidad,Qadd:()=>R(t.id),Qdelete:()=>A(t.id)})]}),e.jsxs("div",{className:"grid grid-cols-2 w-full",children:[e.jsx("div",{className:"col-span1",children:e.jsxs("div",{className:"flex flex-col font-bold text-[#112212] items-center justify-center content-end",children:[e.jsx("span",{className:"opacity-80",children:"Precio"}),e.jsxs("span",{className:"text-center",children:["S/. ",t.precio,t.usePoints&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-orange-500 text-sm",children:"Usando puntos"})]})]})]})}),e.jsx("div",{className:"col-span1",children:e.jsxs("div",{className:"flex flex-col  font-bold text-[#112212] items-end content-end",children:[e.jsx("span",{className:"opacity-80",children:"Total"}),e.jsx("span",{children:i.toFixed(2)})]})})]})]})]})}),e.jsx("hr",{})]})}),e.jsx("div",{className:"mt-4"}),e.jsx(_,{datos:[{id:1,name:"Programa de Puntos",text:"Acumula puntos con tus compras y canjealos por descuentos en tus próximas compras."},{id:2,name:"Garantia Envio Flores",text:"Garantizamos la entrega de tus flores en perfecto estado y en la fecha programada."}]})]}),e.jsxs("div",{className:"basis-4/12 flex flex-col justify-start gap-5",children:[e.jsx("h2",{className:"font-bold text-[16px] text-[#151515]",children:"Codigo de promocion"}),e.jsxs("div",{className:"flex gap-5 relative",children:[console.log(s),e.jsx("input",{value:((w=(v=s[0])==null?void 0:v.cupon)==null?void 0:w.codigo)??"",type:"text",id:"txtCodigoPromocion",className:"w-full border-[#336234] rounded-3xl py-3 px-5 focus:outline-none focus:ring-2 focus:ring-[#336234]"}),e.jsx("button",{className:"absolute rounded-3xl border right-[3%] p-2 px-4 text-white bg-[#336234] w-[113px] top-1/2 transform -translate-y-1/2",children:"Aplicar"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"mt-7 ",children:[e.jsx("h2",{className:"font-bold text-[16px] text-[#a78f8f]",children:"Resumen del pedido "}),e.jsxs("div",{className:"flex flex-row gap-4 mt-4",children:[e.jsxs("div",{className:"w-8/12 text-[#112212] flex flex-col",children:[s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-80",children:" SubTotal"}),e.jsx("span",{id:"itemTotal",className:"opacity-80",children:"Descuento"})]}),e.jsx("span",{className:"font-bold",children:"Sub Total"})]}),e.jsxs("div",{className:"w-4/12 flex flex-col justify-end items-end px-4 font-bold",children:[e.jsxs("span",{className:"opacity-80",children:["S/ ",Number(f)]}),s.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"opacity-80",children:((k=(y=s[0])==null?void 0:y.cupon)==null?void 0:k.porcentaje)==1?`${Number(s[0].cupon.monto).toFixed(0)} %`:`S/ ${s[0].cupon.monto}`}),e.jsx("span",{className:"text-[#112212] font-bold text-nowrap",id:"itemsTotal",children:((S=(C=s[0])==null?void 0:C.cupon)==null?void 0:S.porcentaje)==1?`S/  ${Number(f)-Number(f)*Number(s[0].cupon.monto).toFixed(0)/100} `:`S/ ${Number(f)-Number(s[0].cupon.monto)}`})]})]})]})]}),e.jsx("hr",{}),e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("a",{id:"btnSiguiente",href:"/pago",className:"h-[54px] text-[#336234] hover:text-white bg-white hover:bg-[#336234] transition-colors duration-300 border border-[#336234] w-full py-4 rounded-3xl cursor-pointer font-semibold text-[16px] inline-block text-center",children:"Realizar Pedido"}),e.jsx("a",{href:"/catalogo/1",className:"h-[54px] text-[#336234] hover:text-white bg-white hover:bg-[#336234] transition-colors duration-300 border border-[#336234] w-full py-4 rounded-3xl cursor-pointer font-semibold text-[16px] inline-block text-center",children:"Seguir comprando"})]})})]})]})]})}),e.jsxs("div",{id:"modalComplementos",className:o?"block ease-in ":"hidden",children:[e.jsx("div",{className:" fixed inset-0 z-30 bg-gray-500 bg-opacity-75 transition-opacity"}),e.jsx("div",{className:" fixed inset-0 z-30 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsxs("div",{ref:j,className:"relative font-b_slick_bold transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl",children:[e.jsx("div",{className:"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start w-full",children:e.jsxs("div",{className:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left w-full",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("h2",{className:"text-lg font-bold leading-6 text-gray-900 mb-2",id:"modal-title",children:"Complementa tu pedido"}),e.jsx("img",{src:"/images/img/xcoral.png",alt:"",className:"h-5 cursor-pointer",onClick:g})]}),e.jsx("div",{className:"mt-5 gap-4 ",id:"containerComplementos","data-accordion":"collapse",children:e.jsx(M,{datos:N,setDetallePedido:P})})]})})}),N.length===1&&e.jsx("div",{className:"flex w-full justify-center items-center",children:e.jsx("button",{type:"button",className:"flex flex-col justify-center  text-white rounded-lg items-center bg-rosalasdonas p-2",onClick:()=>openModalComplementos(d),children:"Ver más"})}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse content-between justify-between  sm:px-6 ",children:e.jsx(q,{callback:g,width:"w-[135px]",variant:"primary",children:"Cerrar"})})]})})})]})]})};$((d,x)=>{T(d).render(e.jsx(O,{...x}))});
