import{j as e}from"./Example-zgwdEd5i.js";import{c as he}from"./ReactAppend-mx8-aehl.js";import{r}from"./useOutsideClick-TT1qJ6UJ.js";import{C as be}from"./CreateReactScript-byan57Y_.js";import{C as je}from"./Card-eNbsL1sp.js";import{a as we}from"./axios-_sX4vCAy.js";/* empty css             */import"./index-XJuWVQ-l.js";import{P as ye}from"./ProductCard-W8FLIn_Y.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-MHkScKtm.js";import"./main-Vi8adC25.js";import"./storage-zp2nPsZU.js";/* empty css              */import"./tippy-react.esm-xuEmYGnY.js";import"./tippy.esm-vXDZ6XwW.js";const Ce=({categorias:b,selected_category:x,categoria:p,url_env:se,beneficios:re,tipoFloresList:oe,subcategoria:V,categoriaSelected:$})=>{console.log($);const w=12;let y=new AbortController;const[L,A]=r.useState([]),[i,j]=r.useState(x?{category_id:[x]}:{}),[ve,ie]=r.useState(0),[f,C]=r.useState(1),[le,q]=r.useState("Cargar mas productos"),[g,D]=r.useState(""),[ne,ae]=r.useState(!0),[v,N]=r.useState(!1),[H,B]=r.useState(""),[U,J]=r.useState(p?p.name:""),[W,G]=r.useState(""),[F,_]=r.useState(!1),[u,m]=r.useState({categories:x?[{id:`${p.id}`,name:p.name}]:[],priceOrder:"",tipoFlor:[]}),[S,K]=r.useState(p||{}),h=r.useRef($),[k,O]=r.useState(!1),R=r.useRef(V),E=r.useRef({}),M=r.useRef({}),Q=r.useRef({}),ce=()=>{_(!F)},de=()=>{O(!k)};r.useState(!1),r.useRef(!1);const pe=(t=[],s)=>{const o=[];return t.forEach((n,c)=>{c==0?o.push(n):o.push(s,n)}),o},ue=()=>{N(!v)};function X(t){const s=t?`/catalogo/${t}`:"/catalogo";window.history.pushState(null,"",s)}const T=r.useRef(null),z=r.useRef(null),I=r.useRef(null),Y=t=>{T.current&&!T.current.contains(t.target)&&_(!1),z.current&&!z.current.contains(t.target)&&O(!1),I.current&&!I.current.contains(t.target)&&N(!1)};r.useEffect(()=>(document.addEventListener("mousedown",Y),()=>{document.removeEventListener("mousedown",Y)}),[]);const me=t=>{_(!F);const s=t.target.id,o=M.current[s].querySelector("span").textContent,n=b.find(c=>c.id==s);K(n),X(n.slug??null),J(o),!u.categories.find(c=>c.id==s)&&(m(c=>({...c,categories:[{id:s,name:o}]})),j(c=>({...c,category_id:[s]})))},xe=t=>{O(!k);const s=t.target.id,o=Q.current[s].querySelector("span").textContent;G(o),!u.tipoFlor.find(n=>n.id==s)&&(m(n=>({...n,tipoFlor:[{id:s,name:o}]})),j(n=>({...n,tipoFlor:[s]})))};r.useEffect(()=>{C(1),P()},[i]),r.useEffect(()=>{P()},[f]);const Z=t=>{N(!v);let s=t.target.id,o=E.current[s].querySelector("span").textContent;B(o),D(n=>t.target.value),m(n=>({...n,priceOrder:t.target.value}))};r.useEffect(()=>{C(1),P()},[g]);const fe=t=>{J("Ocasiones"),X(null),K({}),h.current=null,R.current=null,m(s=>({...s,categories:s.categories.filter(o=>o.id!==t)})),j(s=>({...i,subcategory_id:null,category_id:i.category_id.filter(o=>o!==t)}))},ee=()=>{B("Ordenar por"),m(t=>({...t,priceOrder:""})),D("")},ge=()=>{G("Tipo de Flor"),m(t=>({...t,tipoFlor:[]})),j(t=>({...i,tipoFlor:[]}))},P=async()=>{y.abort("some"),y=new AbortController;let t=y.signal;q("Cargando ...");const s=[];let o=[];if(console.log(g),g&&(g==="price_high"?o.push({selector:"products.preciofiltro",desc:!0}):g==="price_low"?o.push({selector:"products.preciofiltro",desc:!1}):o.push({selector:"products.created_at",desc:!0})),console.log(R.current),R.current!==null&&s.push(["subcategory_id","=",V]),i.collections&&i.collections.length>0){const l=[];i.collections.forEach((a,d)=>{d===0?l.push(["collection_id","=",a]):l.push("or",["collection_id","=",a])}),s.push(l)}if(i.sizes&&i.sizes.length>0){const l=[];i.sizes.forEach((a,d)=>{d===0?l.push(["combinaciones.talla_id","=",a]):l.push("or",["combinaciones.talla_id","=",a])}),s.push(l)}if(i.colors&&i.colors.length>0){const l=[];i.colors.forEach((a,d)=>{d===0?l.push(["combinaciones.color_id","=",a]):l.push("or",["combinaciones.color_id","=",a])}),s.push(l)}if(i.tipoFlor&&i.tipoFlor.length>0){const l=[];i.tipoFlor.forEach((a,d)=>{d===0?l.push(["tipo_flor_id","=",a]):l.push("or",["tipo_flor_id","=",a])}),s.push(l)}if(i.category_id&&i.category_id.length>0){const l=[];i.category_id.forEach((a,d)=>{d===0?l.push(["categoria_id","=",a]):l.push("or",["categoria_id","=",a])}),s.push(l)}const n=await we.post("/api/products/paginate",{requireTotalCount:!0,filter:pe([...s,["products.visible","=",!0]],"and"),take:w,skip:w*(f-1),sort:o},{headers:{"Content-Type":"application/json"},signal:t});console.log(n.data);const{data:c,totalCount:te}=n.data;f==1?A(c??[]):A([...L,...c]),q("Cargar más modelos"),ie(te??0),w*f>=te&&ae(!1)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mb-24",children:e.jsxs("div",{className:"mt-14 px-[5%] lg:px-[8%] font-b_slick_bold",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"text-[#FE4A11] text-base tracking-normal uppercase",children:[" ",`Inicio / ${S.name??"Todas las categorias"} `," ",h.current&&e.jsx(e.Fragment,{children:`/ ${h.current.name}`})]}),e.jsxs("div",{className:"text-3xl lg:text-5xl font-bold text-[#112212] uppercase tracking-wider",children:[S.name," ",h.current&&e.jsx(e.Fragment,{children:`/ ${h.current.name}`})]}),e.jsx("div",{className:"text-[#112212] opacity-80 font-b_slick_regular text-lg",children:S.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 mt-4 lg:mt-12 gap-4 lg:gap-10",children:[e.jsxs("div",{className:"dropdown w-full",ref:T,children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:ce,children:U||"Ocasiones"}),F&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:b.map((t,s)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:me}),e.jsx("label",{ref:o=>M.current[t.id]=o,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]},s))})]}),e.jsxs("div",{className:"dropdown w-full",ref:z,children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:de,children:W||"Tipo de Flor"}),k&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:oe.map((t,s)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:xe}),e.jsx("label",{ref:o=>Q.current[t.id]=o,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]},s))})]}),e.jsxs("div",{className:"dropdown w-full",ref:I,children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:ue,children:H||"Ordenar por"}),v&&e.jsxs("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms]",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:[e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id11",className:"radio",value:"price_high",onChange:Z}),e.jsx("label",{ref:t=>E.current.id11=t,htmlFor:"id11",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más alto"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id12",className:"radio",value:"price_low",onChange:Z}),e.jsx("label",{ref:t=>E.current.id12=t,htmlFor:"id12",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más bajo"})})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-7",children:[u.categories.map((t,s)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:()=>fe(`${t.id}`),children:["Categoria - ",t.name,e.jsx("img",{src:"/img_donas/x.png",type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),u.priceOrder&&(u.priceOrder==="price_high"?e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:ee,children:["Orden - Ascendente",e.jsx("img",{src:"/img_donas/x.png",type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}):e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:ee,children:["Orden - Descendente",e.jsx("img",{src:"/img_donas/x.png",type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),u.tipoFlor.map((t,s)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:ge,children:["Tipo de Flor - ",t.name,e.jsx("img",{src:"/img_donas/x.png",type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}))]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-5 mt-16",children:L.map((t,s)=>e.jsx(ye,{...t},`product-${s}`))}),e.jsx("div",{className:"flex flex-row w-full items-center justify-center mt-12",children:ne&&e.jsx("button",{type:"button",onClick:()=>C(f+1),className:"rounded-full border-2 bg-white shadow-xl border-[#336234] text-[#336234] p-2 px-3 font-bold",children:le})}),e.jsx("div",{className:"mt-14 font-b_slick_bold w-full",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-7 justify-between",children:re.map((t,s)=>e.jsx(je,{item:t,url:se}))})})]})})})};be((b,x)=>{he(b).render(e.jsx(Ce,{...x}))});
