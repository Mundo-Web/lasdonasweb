import{j as e}from"./Example-zgwdEd5i.js";import{c as Q}from"./ReactAppend-mx8-aehl.js";import{r as l}from"./useOutsideClick-TT1qJ6UJ.js";import{C as U}from"./CreateReactScript-BXBBo-c3.js";import{S as X}from"./react-select.esm-FGKTizt7.js";import{a as Z}from"./axios-_sX4vCAy.js";/* empty css             */import"./index-XJuWVQ-l.js";import{P as ee}from"./ProductCard-SKXuSLVk.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-MzJplI4M.js";import"./storage-zp2nPsZU.js";import"./setPrototypeOf-7MT-VylK.js";import"./floating-ui.dom-KYqStz1f.js";const te={control:(s,i)=>({...s,backgroundColor:"#F8F8F8",borderRadius:"12px",width:"100%",paddingTop:"8px",paddingBottom:"8px",marginBottom:"6px",borderColor:(i.isFocused,"#EFEFEF"),boxShadow:i.isFocused?"0 8px 16px rgba(0, 0, 0, 0.2)":"0 4px 8px rgba(0, 0, 0, 0.1)","&:hover":{borderColor:"#EFEFEF"},minHeight:"48px"}),option:(s,i)=>({...s,color:(i.isSelected,"#112212"),paddingTop:"13px",paddingBottom:"13px",backgroundColor:i.isSelected?"#EFEFEF":"#F9FAFB","&:hover":{backgroundColor:(i.isSelected,"#EFEFEF"),color:(i.isSelected,"#112212")},padding:"10px 20px"}),menu:s=>({...s,marginTop:"0px",paddingTop:"0px",borderRadius:"12px",maxHeight:"150px",overflowY:"auto"}),dropdownIndicator:s=>({...s,color:"#112212","&:hover":{color:"#112212"}}),indicatorSeparator:()=>({display:"none"}),singleValue:s=>({...s,color:"#112212"}),placeholder:s=>({...s,color:"#112212",fontWeight:"bold",fontSize:"16px"})},se=({title:s,handleOptionChange:i,options:x=[]})=>e.jsx(X,{className:"font-poppins_regular font-bold text-lg w-full z-0",styles:te,options:x.map(m=>({value:m.id,label:m.name})),placeholder:s,isMulti:!0,filterOption:()=>!0,isSearchable:!1}),re=(s,i)=>s?s.length<=i?s:s.substring(0,i)+"...":"";function oe({item:s,url:i}){return console.log(s),e.jsxs("div",{className:"flex flex-col p-4 rounded-3xl bg-[#E8EDDE] min-w-[240px]",children:[e.jsx("img",{src:`${i}/${s.icono}`,alt:"",className:"w-12 h-12 object-contain aspect-square"}),e.jsxs("div",{class:"flex flex-col mt-4 w-full",children:[e.jsx("h2",{className:"text-2xl tracking-wide text-zinc-800 ",children:s.titulo}),e.jsx("p",{className:"mt-2 text-base tracking-wide leading-5 text-neutral-600 font-b_slick_regular",children:re(s.descripcion,70)})]})]})}const ie=({categorias:s,selected_category:i,categoria:x,url_env:m,beneficios:B})=>{let j=new AbortController;const[v,S]=l.useState([]),[r,E]=l.useState(i?{category_id:[i]}:{}),[le,q]=l.useState(0),[g,w]=l.useState(1),[D,_]=l.useState("Cargar mas productos"),[f,k]=l.useState(""),[H,L]=l.useState(!0),[C,O]=l.useState(!1),[P,M]=l.useState(""),[z,J]=l.useState(""),[y,R]=l.useState(!1),[h,b]=l.useState({categories:i?[{id:`${x.id}`,name:x.name}]:[],priceOrder:""}),N=l.useRef({}),$=l.useRef({}),W=()=>{R(!y)};l.useState(!1),l.useRef(!1);const Y=(t=[],o)=>{const a=[];return t.forEach((p,n)=>{n==0?a.push(p):a.push(o,p)}),a},G=()=>{O(!C)},T=t=>{R(!y);const o=t.target.id,a=$.current[o].querySelector("span").textContent;function p(n){return Object.keys(n).length===0&&n.constructor===Object}J(a),!h.categories.find(n=>n.id==o)&&(b(n=>({...n,categories:[...n.categories,{id:o,name:a}]})),E(n=>p(n)?{...n,category_id:[o]}:{...n,category_id:[...r.category_id,o]}))};l.useEffect(()=>{w(1),F()},[r]),l.useEffect(()=>{F()},[g]);const I=t=>{O(!C);const o=t.target.id,a=N.current[o].querySelector("span").textContent;M(a),k(p=>t.target.value),b(p=>({...p,priceOrder:t.target.value}))};l.useEffect(()=>{w(1),F()},[f]);const K=t=>{b(o=>({...o,categories:o.categories.filter(a=>a.id!==t)})),E(o=>({...r,category_id:r.category_id.filter(a=>a!==t)}))},V=()=>{b(t=>({...t,priceOrder:""})),k("")},F=async()=>{j.abort("some"),j=new AbortController;let t=j.signal;_("Cargando ...");const o=[];let a=[];if(f&&(f==="price_high"?a.push({selector:"products.preciofiltro",desc:!0}):f==="price_low"?a.push({selector:"products.preciofiltro",desc:!1}):a.push({selector:"products.created_at",desc:!0})),(r.maxPrice||r.minPrice)&&(r.maxPrice&&r.minPrice?o.push([[["preciofiltro",">=",r.minPrice]],"and",[["preciofiltro","<=",r.maxPrice]]]):r.minPrice?o.push([["precio",">=",r.minPrice],"or",["descuento",">=",r.minPrice]]):r.maxPrice&&o.push([["precio","<=",r.maxPrice],"or",["descuento","<=",r.maxPrice]])),r.collections&&r.collections.length>0){const c=[];r.collections.forEach((d,u)=>{u===0?c.push(["collection_id","=",d]):c.push("or",["collection_id","=",d])}),o.push(c)}if(r.sizes&&r.sizes.length>0){const c=[];r.sizes.forEach((d,u)=>{u===0?c.push(["combinaciones.talla_id","=",d]):c.push("or",["combinaciones.talla_id","=",d])}),o.push(c)}if(r.colors&&r.colors.length>0){const c=[];r.colors.forEach((d,u)=>{u===0?c.push(["combinaciones.color_id","=",d]):c.push("or",["combinaciones.color_id","=",d])}),o.push(c)}if(r.category_id&&r.category_id.length>0){const c=[];r.category_id.forEach((d,u)=>{u===0?c.push(["categoria_id","=",d]):c.push("or",["categoria_id","=",d])}),o.push(c)}const p=await Z.post("/api/products/paginate",{requireTotalCount:!0,filter:Y([...o,["products.visible","=",!0]],"and"),take:12,skip:12*(g-1),sort:a},{headers:{"Content-Type":"application/json"},signal:t}),{data:n,totalCount:A}=p.data;g==1?S(n??[]):S([...v,...n]),_("Cargar m치s modelos"),q(A??0),12*g>=A&&L(!1)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mb-24",children:e.jsxs("div",{className:"mt-14 px-[5%] lg:px-[8%] font-b_slick_bold",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"text-[#FE4A11] text-base tracking-normal uppercase",children:[" ",`Inicio / ${x.name??"Todas las categorias"} `]}),e.jsx("div",{className:"text-3xl lg:text-5xl font-bold text-[#112212] uppercase tracking-wider",children:x.name}),e.jsx("div",{className:"text-[#112212] opacity-80 font-b_slick_regular text-lg",children:x.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 mt-4 lg:mt-12 gap-4 lg:gap-10",children:[e.jsxs("div",{className:"dropdown w-full",children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:W,children:z||"Categoria"}),y&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:s.map((t,o)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:T}),e.jsx("label",{ref:a=>$.current[t.id]=a,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]}))})]}),e.jsxs("div",{className:"dropdown w-full",children:[e.jsx("div",{className:"input-box focus:outline-none  font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:G,children:P||"Ordenar por"}),C&&e.jsxs("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms]",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:[e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id11",className:"radio",value:"price_high",onChange:I}),e.jsx("label",{ref:t=>N.current.id11=t,htmlFor:"id11",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio m치s alto"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id12",className:"radio",value:"price_low",onChange:I}),e.jsx("label",{ref:t=>N.current.id12=t,htmlFor:"id12",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio m치s bajo"})})]})]})]}),e.jsx(se,{options:s,title:"Ocasi칩n",handleOptionChange:T})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-7",children:[h.categories.map((t,o)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:()=>K(`${t.id}`),children:["Categoria - ",t.name,e.jsx("img",{src:`${m}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),h.priceOrder&&(h.priceOrder==="price_high"?e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:V,children:["Orden - Ascendente",e.jsx("img",{src:`${m}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}):e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:V,children:["Orden - Descendente",e.jsx("img",{src:`${m}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}))]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mt-16",children:v.map((t,o)=>e.jsx(ee,{...t},`product-${o}`))}),e.jsx("div",{className:"flex flex-row w-full items-center justify-center mt-12",children:H&&e.jsx("button",{type:"button",onClick:()=>w(g+1),className:"rounded-full border-2 bg-white shadow-xl border-[#336234] text-[#336234] p-2 px-3 font-bold",children:D})}),e.jsx("div",{className:"mt-14 font-b_slick_bold w-full",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-7 justify-between",children:B.map((t,o)=>e.jsx(oe,{item:t,url:m}))})})]})})})};U((s,i)=>{Q(s).render(e.jsx(ie,{...i}))});
