import{j as e}from"./Example-zgwdEd5i.js";import{c as W}from"./ReactAppend-mx8-aehl.js";import{r as o}from"./useOutsideClick-TT1qJ6UJ.js";import{C as X}from"./CreateReactScript-gWdz5wop.js";import{t as Y}from"./truncateText-C3yxPslF.js";import{a as Z}from"./axios-_sX4vCAy.js";/* empty css             */import"./index-XJuWVQ-l.js";import{P as ee}from"./ProductCard-AyJQ3Tyq.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-6LgzDr2G.js";function te({item:c,url:d}){return console.log(c),e.jsxs("div",{className:"bg-[#E8EDDE] h-[198px] flex flex-col rounded-3xl p-4",children:[e.jsx("img",{src:`${d}/${c.icono}`,alt:"",className:"w-12 h-12"}),e.jsx("h2",{className:"text-[24px] font-semibold h-[80px] mt-2",children:c.titulo}),e.jsx("p",{className:"text-[14px] ",children:Y(c.descripcion,70)})]})}const se=({categorias:c,selected_category:d,categoria:x,url_env:u,beneficios:A})=>{let j=new AbortController;const[S,_]=o.useState([]),[s,P]=o.useState(d?{category_id:[d]}:{}),[ie,D]=o.useState(0),[m,C]=o.useState(1),[L,F]=o.useState("Cargar mas productos"),[f,k]=o.useState(""),[q,B]=o.useState(!0),[N,E]=o.useState(!1),[O,H]=o.useState(""),[$,J]=o.useState(""),[y,z]=o.useState(!1),[h,g]=o.useState({categories:d?[{id:`${x.id}`,name:x.name}]:[],priceOrder:""}),w=o.useRef({}),R=o.useRef({}),G=()=>{z(!y)};o.useState(!1),o.useRef(!1);const K=(t=[],r)=>{const i=[];return t.forEach((n,b)=>{b==0?i.push(n):i.push(r,n)}),i},M=()=>{E(!N)},Q=t=>{z(!y);const r=t.target.id,i=R.current[r].querySelector("span").textContent;J(i),!h.categories.find(n=>n.id==r)&&(g(n=>({...n,categories:[...n.categories,{id:r,name:i}]})),P(n=>({...n,category_id:[...s.category_id,r]})))};o.useEffect(()=>{C(1),v()},[s]),o.useEffect(()=>{v()},[m]);const I=t=>{E(!N);const r=t.target.id,i=w.current[r].querySelector("span").textContent;H(i),k(n=>t.target.value),g(n=>({...n,priceOrder:t.target.value}))};o.useEffect(()=>{C(1),v()},[f]);const U=t=>{g(r=>({...r,categories:r.categories.filter(i=>i.id!==t)})),P(r=>({...s,category_id:s.category_id.filter(i=>i!==t)}))},T=()=>{g(t=>({...t,priceOrder:""})),k("")},v=async()=>{j.abort("some"),j=new AbortController;let t=j.signal;F("Cargando ...");const r=[];let i=[];if(f&&(f==="price_high"?i.push({selector:"products.preciofiltro",desc:!0}):f==="price_low"?i.push({selector:"products.preciofiltro",desc:!1}):i.push({selector:"products.created_at",desc:!0})),(s.maxPrice||s.minPrice)&&(s.maxPrice&&s.minPrice?r.push([[["preciofiltro",">=",s.minPrice]],"and",[["preciofiltro","<=",s.maxPrice]]]):s.minPrice?r.push([["precio",">=",s.minPrice],"or",["descuento",">=",s.minPrice]]):s.maxPrice&&r.push([["precio","<=",s.maxPrice],"or",["descuento","<=",s.maxPrice]])),s.collections&&s.collections.length>0){const a=[];s.collections.forEach((l,p)=>{p===0?a.push(["collection_id","=",l]):a.push("or",["collection_id","=",l])}),r.push(a)}if(s.sizes&&s.sizes.length>0){const a=[];s.sizes.forEach((l,p)=>{p===0?a.push(["combinaciones.talla_id","=",l]):a.push("or",["combinaciones.talla_id","=",l])}),r.push(a)}if(s.colors&&s.colors.length>0){const a=[];s.colors.forEach((l,p)=>{p===0?a.push(["combinaciones.color_id","=",l]):a.push("or",["combinaciones.color_id","=",l])}),r.push(a)}if(s.category_id&&s.category_id.length>0){const a=[];s.category_id.forEach((l,p)=>{p===0?a.push(["categoria_id","=",l]):a.push("or",["categoria_id","=",l])}),r.push(a)}const n=await Z.post("/api/products/paginate",{requireTotalCount:!0,filter:K([...r,["products.visible","=",!0]],"and"),take:12,skip:12*(m-1),sort:i},{headers:{"Content-Type":"application/json"},signal:t}),{data:b,totalCount:V}=n.data;m==1?_(b??[]):_([...S,...b]),F("Cargar más modelos"),D(V??0),12*m>=V&&B(!1)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mb-24",children:e.jsxs("div",{className:"mt-14 px-[8%]",children:[e.jsxs("div",{className:"text-[#FE4A11]",children:[" ",`Inicio / ${x.name??"Todas las categorias"} `]}),e.jsx("div",{className:"text-[44px] font-bold text-[#112212] -mt-3",children:x.name}),e.jsxs("div",{className:"text-[#112212] opacity-80",children:[x.description," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 mt-12 gap-10",children:[e.jsx("select",{className:"rounded-md p-2 px-4 font-bold flex items-baseline text-[18px]",name:"",id:"",children:e.jsx("option",{value:"",children:"Tipo Flor"})}),e.jsxs("div",{className:"dropdown w-full order-2 md:order-4",children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-2 bg-[#F5F5F5]",onClick:G,children:$||"Categoria"}),y&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:c.map((t,r)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:Q}),e.jsx("label",{ref:i=>R.current[t.id]=i,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]}))})]}),e.jsxs("div",{className:"dropdown w-full order-2 md:order-4",children:[e.jsx("div",{className:"input-box focus:outline-none  font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-2 bg-[#F5F5F5]",onClick:M,children:O||"Ordenar por"}),N&&e.jsxs("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms]",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:[e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id11",className:"radio",value:"price_high",onChange:I}),e.jsx("label",{ref:t=>w.current.id11=t,htmlFor:"id11",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más alto"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id12",className:"radio",value:"price_low",onChange:I}),e.jsx("label",{ref:t=>w.current.id12=t,htmlFor:"id12",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más bajo"})})]})]})]})]}),e.jsxs("div",{className:"flex flex-row gap-4 mt-7",children:[h.categories.map((t,r)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] border-2 font-bold text-[12px] rounded-xl shadow-lg flex flex-row items-center justify-center px-2",onClick:()=>U(`${t.id}`),children:["Categoria - ",t.name,e.jsx("img",{src:`${u}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),h.priceOrder&&(h.priceOrder==="price_high"?e.jsxs("div",{className:" cursor-pointer text-[#112212] border-2 font-bold text-[12px] rounded-xl shadow-lg flex flex-row items-center justify-center px-2",onClick:T,children:["Orden - Ascendente",e.jsx("img",{src:`${u}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}):e.jsxs("div",{className:"cursor-pointer text-[#112212] border-2 font-bold text-[12px] rounded-xl shadow-lg flex flex-row items-center justify-center px-2",onClick:T,children:["Orden - Descendente",e.jsx("img",{src:`${u}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}))]}),e.jsx("div",{className:"grid grid-cols-4 gap-5 mt-16",children:S.map((t,r)=>e.jsx(ee,{...t},`product-${r}`))}),e.jsx("div",{className:"flex flex-row w-full items-center justify-center mt-12",children:q&&e.jsx("button",{type:"button",onClick:()=>C(m+1),className:"rounded-full border-2 bg-white shadow-xl border-[#336234] text-[#336234] p-2 px-3 font-bold",children:L})}),e.jsx("div",{className:"grid grid-cols-4 gap-7 mt-16",children:A.map((t,r)=>e.jsx(te,{item:t,url:u}))})]})})})};X((c,d)=>{W(c).render(e.jsx(se,{...d}))});
