import{j as e}from"./Example-zgwdEd5i.js";import{c as ne}from"./ReactAppend-mx8-aehl.js";import{r as o}from"./useOutsideClick-TT1qJ6UJ.js";import{C as ce}from"./CreateReactScript-BXBBo-c3.js";import{a as de}from"./axios-_sX4vCAy.js";/* empty css             */import"./index-XJuWVQ-l.js";import{P as pe}from"./ProductCard-SKXuSLVk.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-MzJplI4M.js";import"./storage-zp2nPsZU.js";const xe=(n,d)=>n?n.length<=d?n:n.substring(0,d)+"...":"";function ue({item:n,url:d}){return console.log(n),e.jsxs("div",{className:"flex flex-col p-4 rounded-3xl bg-[#E8EDDE] min-w-[240px]",children:[e.jsx("img",{src:`${d}/${n.icono}`,alt:"",className:"w-12 h-12 object-contain aspect-square"}),e.jsxs("div",{class:"flex flex-col mt-4 w-full",children:[e.jsx("h2",{className:"text-2xl tracking-wide text-zinc-800 ",children:n.titulo}),e.jsx("p",{className:"mt-2 text-base tracking-wide leading-5 text-neutral-600 font-b_slick_regular",children:xe(n.descripcion,70)})]})]})}const me=({categorias:n,selected_category:d,categoria:u,url_env:f,beneficios:M,tipoFloresList:k})=>{let w=new AbortController;const[P,O]=o.useState([]),[r,g]=o.useState(d?{category_id:[d]}:{}),[he,Q]=o.useState(0),[h,y]=o.useState(1),[X,E]=o.useState("Cargar mas productos"),[b,T]=o.useState(""),[Y,Z]=o.useState(!0),[N,z]=o.useState(!1),[$,R]=o.useState(""),[I,V]=o.useState(u?u.name:""),[D,q]=o.useState(""),[C,A]=o.useState(!1),[x,m]=o.useState({categories:d?[{id:`${u.id}`,name:u.name}]:[],priceOrder:"",tipoFlor:[]}),[v,H]=o.useState(u||{}),[F,B]=o.useState(!1),_=o.useRef({}),L=o.useRef({}),U=o.useRef({}),ee=()=>{A(!C)},te=()=>{B(!F)};o.useState(!1),o.useRef(!1);const se=(t=[],s)=>{const i=[];return t.forEach((l,j)=>{j==0?i.push(l):i.push(s,l)}),i},re=()=>{z(!N)};function J(t){const s=t?`/catalogo/${t}`:"/catalogo";window.history.pushState(null,"",s)}const ie=t=>{A(!C);const s=t.target.id,i=L.current[s].querySelector("span").textContent;H(n.find(l=>l.id==s)),J(s),V(i),!x.categories.find(l=>l.id==s)&&(m(l=>({...l,categories:[{id:s,name:i}]})),g(l=>({...l,category_id:[s]})))},oe=t=>{B(!F);const s=t.target.id,i=U.current[s].querySelector("span").textContent;if(q(i),console.log(x.tipoFlor),x.tipoFlor.find(l=>l.id==s)){console.log("erntro en el return");return}m(l=>({...l,tipoFlor:[{id:s,name:i}]})),console.log(x),g(l=>({...l,tipoFlor:[s]}))};o.useEffect(()=>{y(1),S()},[r]),o.useEffect(()=>{S()},[h]);const W=t=>{z(!N);let s=t.target.id,i=_.current[s].querySelector("span").textContent;R(i),T(l=>t.target.value),m(l=>({...l,priceOrder:t.target.value}))};o.useEffect(()=>{y(1),S()},[b]);const le=t=>{V("Ocasiones"),J(null),H({}),m(s=>({...s,categories:s.categories.filter(i=>i.id!==t)})),g(s=>({...r,category_id:r.category_id.filter(i=>i!==t)}))},G=()=>{R("Ordenar por"),m(t=>({...t,priceOrder:""})),T("")},ae=()=>{q("Tipo de Flor"),m(t=>({...t,tipoFlor:[]})),g(t=>({...r,tipoFlor:[]}))},S=async()=>{w.abort("some"),w=new AbortController;let t=w.signal;E("Cargando ...");const s=[];let i=[];if(b&&(b==="price_high"?i.push({selector:"products.preciofiltro",desc:!0}):b==="price_low"?i.push({selector:"products.preciofiltro",desc:!1}):i.push({selector:"products.created_at",desc:!0})),(r.maxPrice||r.minPrice)&&(r.maxPrice&&r.minPrice?s.push([[["preciofiltro",">=",r.minPrice]],"and",[["preciofiltro","<=",r.maxPrice]]]):r.minPrice?s.push([["precio",">=",r.minPrice],"or",["descuento",">=",r.minPrice]]):r.maxPrice&&s.push([["precio","<=",r.maxPrice],"or",["descuento","<=",r.maxPrice]])),r.collections&&r.collections.length>0){const a=[];r.collections.forEach((c,p)=>{p===0?a.push(["collection_id","=",c]):a.push("or",["collection_id","=",c])}),s.push(a)}if(r.sizes&&r.sizes.length>0){const a=[];r.sizes.forEach((c,p)=>{p===0?a.push(["combinaciones.talla_id","=",c]):a.push("or",["combinaciones.talla_id","=",c])}),s.push(a)}if(r.colors&&r.colors.length>0){const a=[];r.colors.forEach((c,p)=>{p===0?a.push(["combinaciones.color_id","=",c]):a.push("or",["combinaciones.color_id","=",c])}),s.push(a)}if(r.tipoFlor&&r.tipoFlor.length>0){const a=[];r.tipoFlor.forEach((c,p)=>{p===0?a.push(["tipo_flor_id","=",c]):a.push("or",["tipo_flor_id","=",c])}),s.push(a)}if(r.category_id&&r.category_id.length>0){const a=[];r.category_id.forEach((c,p)=>{p===0?a.push(["categoria_id","=",c]):a.push("or",["categoria_id","=",c])}),s.push(a)}const l=await de.post("/api/products/paginate",{requireTotalCount:!0,filter:se([...s,["products.visible","=",!0]],"and"),take:12,skip:12*(h-1),sort:i},{headers:{"Content-Type":"application/json"},signal:t}),{data:j,totalCount:K}=l.data;h==1?O(j??[]):O([...P,...j]),E("Cargar más modelos"),Q(K??0),12*h>=K&&Z(!1)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mb-24",children:e.jsxs("div",{className:"mt-14 px-[5%] lg:px-[8%] font-b_slick_bold",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"text-[#FE4A11] text-base tracking-normal uppercase",children:[" ",`Inicio / ${v.name??"Todas las categorias"} `]}),e.jsx("div",{className:"text-3xl lg:text-5xl font-bold text-[#112212] uppercase tracking-wider",children:v.name}),e.jsx("div",{className:"text-[#112212] opacity-80 font-b_slick_regular text-lg",children:v.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 mt-4 lg:mt-12 gap-4 lg:gap-10",children:[e.jsxs("div",{className:"dropdown w-full",children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:ee,children:I||"Ocasiones"}),C&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:n.map((t,s)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:ie}),e.jsx("label",{ref:i=>L.current[t.id]=i,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]}))})]}),e.jsxs("div",{className:"dropdown w-full",children:[e.jsx("div",{className:"input-box focus:outline-none  font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:te,children:D||"Tipo de Flor"}),console.log(k),F&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms]",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:k.map((t,s)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:oe}),e.jsx("label",{ref:i=>U.current[t.id]=i,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]}))})]}),e.jsxs("div",{className:"dropdown w-full",children:[e.jsx("div",{className:"input-box focus:outline-none  font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:re,children:$||"Ordenar por"}),N&&e.jsxs("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms]",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:[e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id11",className:"radio",value:"price_high",onChange:W}),e.jsx("label",{ref:t=>_.current.id11=t,htmlFor:"id11",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más alto"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id12",className:"radio",value:"price_low",onChange:W}),e.jsx("label",{ref:t=>_.current.id12=t,htmlFor:"id12",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más bajo"})})]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-7",children:[x.categories.map((t,s)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:()=>le(`${t.id}`),children:["Categoria - ",t.name,e.jsx("img",{src:`${f}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),x.priceOrder&&(x.priceOrder==="price_high"?e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:G,children:["Orden - Ascendente",e.jsx("img",{src:`${f}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}):e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:G,children:["Orden - Descendente",e.jsx("img",{src:`${f}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),x.tipoFlor.map((t,s)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:ae,children:["Tipo de Flor - ",t.name,e.jsx("img",{src:`${f}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}))]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mt-16",children:P.map((t,s)=>e.jsx(pe,{...t},`product-${s}`))}),e.jsx("div",{className:"flex flex-row w-full items-center justify-center mt-12",children:Y&&e.jsx("button",{type:"button",onClick:()=>y(h+1),className:"rounded-full border-2 bg-white shadow-xl border-[#336234] text-[#336234] p-2 px-3 font-bold",children:X})}),e.jsx("div",{className:"mt-14 font-b_slick_bold w-full",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-7 justify-between",children:M.map((t,s)=>e.jsx(ue,{item:t,url:f}))})})]})})})};ce((n,d)=>{ne(n).render(e.jsx(me,{...d}))});
