import{j as t}from"./Example-zgwdEd5i.js";import{r as d,R as ot}from"./useOutsideClick-TT1qJ6UJ.js";import{c as St}from"./ReactAppend-mx8-aehl.js";import{C as Ft}from"./CreateReactScript-byan57Y_.js";import{s as ze}from"./storage-zp2nPsZU.js";import{c as He}from"./calcularTotal-FPqXOtx1.js";/* empty css             */import{I as B,G as At,S as lt,B as Ce,c as Et}from"./GoogleMapsComponent-ztACEjLM.js";import{m as ne}from"./main-Vi8adC25.js";import{S as Y}from"./Profile-6kVS_QzG.js";import"./index-XJuWVQ-l.js";import{a as De}from"./axios-_sX4vCAy.js";import{M as Ot}from"./ModalGoogle-6wSbWolA.js";import{M as kt}from"./ModalSimple-wbpAEmbf.js";import{P as F}from"./index-VFMbf6KQ.js";import"./SelectSecond-_RR1eB0T.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./index-38suPYpT.js";import"./CreateReactScript-MHkScKtm.js";/* empty css              */import"./extends-wRoo2ExD.js";import"./setPrototypeOf-ahVgEFUp.js";import"./hoist-non-react-statics.cjs-Lm1c23b2.js";import"./floating-ui.dom-LTlC7RoB.js";function _t({producto:e,extract:r,sku:n,precio:a,cantidad:o,total:i,usePoints:f,imagen:p,points:x,userPoints:l,img:g=!0}){let j=structuredClone(o);for(let A=0;A<o;A++)f&&l>=x&&(j--,l-=x);const _=j*a;return t.jsxs("div",{className:"flex  flex-col md:flex-row gap-5 md:gap-10 justify-between items-start w-full p-5 mt-4 border hover:border-[#336234] rounded-2xl",children:[t.jsxs("div",{className:"flex gap-8 min-w-[240px]  w-full",children:[g&&t.jsx("img",{loading:"lazy",src:p,alt:e,className:"object-contain shrink-0 self-start w-28 aspect-square"}),t.jsxs("div",{className:"flex flex-col w-full",children:[t.jsxs("div",{className:"flex flex-col w-full",children:[t.jsx("h2",{className:"text-lg lg:text-2xl font-bold tracking-wider text-[#336234] line-clamp-2",children:e}),t.jsx("p",{className:"mt-2 text-sm tracking-wide leading-5 text-neutral-900 line-clamp-2 text-opacity-80",children:r}),f&&t.jsx("span",{className:"text-orange-500 text-sm",children:"Usando puntos"})]}),t.jsxs("p",{className:"mt-5 text-xs font-bold tracking-wide text-neutral-900",children:["SKU: ",n]})]})]}),t.jsxs("div",{className:`flex ${g?"flex-row":"flex-col"} justify-between items-start font-bold text-right min-w-[240px] w-full md:w-[600px] text-[#112212]`,children:[t.jsxs("div",{className:"flex flex-col flex-1 shrink justify-center basis-0",children:[t.jsx("p",{className:"text-base lg:text-xl font-bold tracking-wider text-[#336234] line-clamp-2",children:"Precio"}),t.jsxs("p",{className:"mt-2 text-base tracking-wider text-neutral-900",children:["S/ ",Number(a).toFixed(0)]})]}),t.jsxs("div",{className:"flex flex-col flex-1 shrink justify-center whitespace-nowrap basis-0",children:[t.jsx("p",{className:"text-base lg:text-xl font-bold tracking-wider text-[#336234] line-clamp-2",children:"Cantidad"}),t.jsx("p",{className:"mt-2 text-base tracking-wider text-neutral-900",children:o})]}),t.jsxs("div",{className:"flex flex-col flex-1 shrink justify-center basis-0",children:[t.jsx("p",{className:"text-base lg:text-xl font-bold tracking-wider text-[#336234] line-clamp-2",children:"Total"}),t.jsxs("p",{className:"mt-2 text-base tracking-wider text-neutral-900",children:["S/ ",_.toFixed(0)]})]})]})]})}function Be({label:e,value:r,isBold:n=!1,setIsModalOpen:a=()=>{}}){const o=n?"text-base font-bold tracking-wider text-right":"text-sm tracking-wide text-right";return t.jsx("div",{className:"flex flex-row justify-end",children:t.jsxs("div",{className:"flex flex-row items-center justify-end gap-5 mt-4 max-w-full font-bold text-right w-[400px]",children:[t.jsx("div",{className:`my-auto ${o} text-neutral-900 text-opacity-80 w-[200px] md:w-[133px] text-start`,children:e}),t.jsx("div",{className:`px-2 ${o} text-neutral-900 w-full md:w-[133px]`,children:r==0?t.jsxs("span",{className:"text-center cursor-pointer",onClick:()=>a(!0),children:[t.jsx("i",{className:"fas fa-map-marker-alt me-1"}),"Seleccione una direccion"]}):t.jsxs(t.Fragment,{children:["S / ",Number(r).toFixed(0)]})})]})})}function xe(){return t.jsx("hr",{className:"mt-3 w-full border-t border-zinc-300 max-md:max-w-full","aria-hidden":"true"})}const Tt=({carrito:e,costoEnvio:r,setIsModalOpen:n,points:a,historicoCupones:o})=>{var j,_,A,T;const i=He(a),[f,p]=d.useState(i),x=d.useRef(!1);d.useEffect(()=>{let C=0,E;o.length>0&&(E=o[0].cupon??{},E.porcentaje==1?C=i*E.monto/100:C=E.monto,x.current=!0);const $=Number(i)+Number(r)-C;p($)},[r,i,o]);const g=`${((_=(j=o[0])==null?void 0:j.cupon)==null?void 0:_.porcentaje)==1?"%":"S/"} ${Number((T=(A=o[0])==null?void 0:A.cupon)==null?void 0:T.monto).toFixed(0)}`;return t.jsxs("main",{className:"flex flex-col flex-1 shrink justify-center self-stretch my-auto w-full basis-0 min-w-[240px] max-md:max-w-full",children:[e.map((C,E)=>t.jsxs(ot.Fragment,{children:[t.jsx(_t,{...C,userPoints:a}),E<e.length-1]},C.id)),t.jsx(xe,{}),t.jsx(Be,{label:"Sub Total",value:i}),t.jsx(xe,{}),x.current&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-row justify-end",children:t.jsxs("div",{className:"flex  justify-end gap-5 self-end mt-6 max-w-full font-bold text-right w-[400px]",children:[t.jsx("div",{className:"my-auto  text-neutral-900 text-opacity-80 w-[200px] md:w-[133px] text-start",children:"Descuento"}),t.jsx("div",{className:"px-2 text-neutral-900 w-full md:w-[133px]",children:g})]})}),t.jsx(xe,{})]}),t.jsx(Be,{label:"Costo de envio",value:r,setIsModalOpen:n}),t.jsx(xe,{}),t.jsx(Be,{label:"Total",value:f,isBold:!0}),t.jsx(xe,{})]})};function Pt({date:e,time:r,iconSrc:n}){return t.jsx("div",{className:"flex flex-row gap-4 justify-center items-center px-3 md:px-6 py-5 w-full text-sm md:text-base tracking-wide text-center text-white rounded-lg  bg-green-800 ",children:t.jsxs("div",{className:"max-w-xl mx-auto flex flex-row justify-center items-center gap-4 sm:gap-6 md:gap-10",children:[t.jsx("i",{className:"far fa-calendar-alt text-2xl"}),t.jsxs("div",{className:"flex flex-col self-stretch my-auto w-full",children:[t.jsx("div",{children:e}),t.jsx("div",{className:"mt-1",children:r})]})]})})}function It({onChange:e}){return t.jsxs("div",{className:"flex flex-wrap gap-8 items-center mt-2 w-full text-sm font-bold tracking-wide whitespace-nowrap max-md:max-w-full",children:[t.jsxs("label",{className:"flex gap-1 items-center self-stretch my-auto text-neutral-900",children:[t.jsx("input",{type:"radio",name:"receiptType",value:"boleta",className:"hover:text-orange-400 hover:border-orange-400 focus:ring-0 focus:ring-offset-0 focus:outline-none checked:text-orange-400 ",onChange:()=>e("boleta"),required:!0,defaultChecked:!0}),t.jsx("span",{className:"self-stretch my-auto",children:"Boleta"})]}),t.jsxs("label",{className:"flex gap-1 items-center self-stretch my-auto text-neutral-900",children:[t.jsx("input",{type:"radio",name:"receiptType",value:"factura",className:"hover:text-orange-400 hover:border-orange-400 focus:ring-0 focus:ring-offset-0 focus:outline-none checked:text-orange-400 ",onChange:()=>e("factura"),required:!0}),t.jsx("span",{className:"self-stretch my-auto",children:"Factura"})]})]})}function Rt({onSelectAddress:e,scriptLoaded:r,handlemodalMaps:n,addressRef:a={},setCostoEnvio:o,datosFinales:i}){const[f,p]=d.useState(Local.get("carrito")||[]),[x,l]=d.useState({fullname:"",phone:"",fulladdress:"",street:"",number:"",mz:"",department:"",province:"",district:"",residenceType:"",reference:"",postal_code:"",coordinates:{latitude:0,longitude:0},entrega:{fecha:f[0].fecha,horario:`${f[0].horario.id} `}}),[g,j]=d.useState(!1),_=()=>{j(!1),n()};d.useEffect(()=>{Object.keys(i.address)==0?l({fullname:"",phone:"",fulladdress:"",street:"",number:"",mz:"",department:"",province:"",district:"",residenceType:"",reference:"",postal_code:"",coordinates:{latitude:0,longitude:0},entrega:{fecha:f[0].fecha,horario:`${f[0].horario.id} `}}):l(y=>({...i.address,entrega:{fecha:f[0].fecha,horario:`${f[0].horario.id} `}}))},[i]);const A=()=>{const y=["fullname","phone","fulladdress","street","number","department","province","district","residenceType","reference","postal_code"];for(let s of y)if(!x[s])return!1;return!0},T={control:y=>({...y,outline:"none",boxShadow:"none",borderColor:"transparent",borderRight:"none","&:hover":{borderColor:"transparent"}}),menu:y=>({...y,width:"90%"}),option:y=>({...y,fontSize:"0.875rem",padding:"8px 12px"}),indicatorSeparator:()=>({display:"none"})},C=async(y,s)=>{try{const v=await De.post("/api/consultar-localidad",{zip_code:y},{cancelToken:s});let{data:S,status:w}=v;if(w===200)return o(S.price),"success"}catch(v){if(console.log("Error:",v),De.isCancel(v))console.log("Request canceled",v.message);else{if(v.response.status==404)return Y.fire({icon:"info",title:"Sin Cobertura",text:"La direccion que ha elegido no tiene cobertura en nuestra zona de reparto",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Escoger otra ubicacion",confirmButtonColor:"#138496"}),"noCobertura";console.error("Error:",v)}}},E=d.useRef(null),$=async(y,s)=>{E.current&&E.current.cancel("Operation canceled due to new request."),E.current=De.CancelToken.source(),await C(s,E.current.token)==="success"?(l(S=>({...S,coordinates:{latitude:y.geometry.location.lat(),longitude:y.geometry.location.lng()}})),y.address_components.forEach(S=>{S.types.includes("administrative_area_level_2")&&l(w=>({...w,province:S.long_name})),S.types.includes("administrative_area_level_1")&&l(w=>({...w,department:S.long_name})),S.types.includes("locality")&&(l(w=>({...w,district:S.long_name})),l(w=>({...w,postal_code:s,fulladdress:y.formatted_address}))),S.types.includes("street_number")&&l(w=>({...w,number:S.long_name})),S.types.includes("route")&&l(w=>({...w,street:S.long_name}))})):(o(0),l(S=>({...S,coordinates:{latitude:0,longitude:0},department:"",district:"",province:"",street:"",number:"",postal_code:"",fulladdress:""})))};d.useEffect(()=>()=>{E.current&&E.current.cancel("Component unmounted.")},[]);const b=y=>{const{name:s,value:v}=y.target;l(S=>({...S,[s]:v}))},L=y=>{y.preventDefault(),A()?(e(x),g(!1)):(j(!0),Y.fire({position:"top-end",title:"Faltan campos por completar",text:"Complete todos los campos obligatorios para continuar",showConfirmButton:!1,showCancelButton:!1,timer:3e3}))},D=y=>{l({...x,residenceType:y.value,otherResidenceType:y.value==="Otro"?"":x.otherResidenceType})},P=y=>{l({...x,otherResidenceType:y.target.value})},O=[{value:"Casa",label:"Casa"},{value:"Departamento",label:"Departamento"},{value:"Oficina",label:"Oficina"},{value:"Otro",label:"Otro"}];return t.jsx("main",{className:"flex flex-col justify-center self-stretch p-1 text-sm font-bold tracking-wide bg-white rounded-none max-w-[880px] max-md:px-5",children:t.jsxs("form",{className:"flex flex-col w-full",children:[t.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 w-full",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsx(B,{required:!0,sendForm:g,eRef:a.fullname,label:"Nombre del destinatario",placeholder:"Nombre del destinatario",className:"w-full min-w-[240px]",value:x.fullname,name:"fullname",handleDatosFinales:b})}),t.jsx("div",{className:"md:col-span-1",children:t.jsx(B,{required:!0,sendForm:g,eRef:a.phone,label:"Tel√©fono del destinatario",placeholder:"+51",className:"w-full",value:x.phone,name:"phone",handleDatosFinales:b})})]}),r&&t.jsx(At,{managezipCode:$,addressRef:a,datosFinales:i}),t.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 w-full text-neutral-900",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsx(B,{required:!0,sendForm:g,eRef:a.street,label:"Calle",placeholder:"Urbanizaci√≥n, Calle, Av.",className:"w-full min-w-[240px]",value:x.street,name:"street",handleDatosFinales:b})}),t.jsx("div",{className:"md:col-span-1",children:t.jsx(B,{required:!0,sendForm:g,eRef:a.number,label:"N√∫mero",className:"w-full",value:x.number,name:"number",handleDatosFinales:b})})]}),t.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 w-full text-neutral-900",children:[t.jsx("div",{className:"md:col-span-2",children:t.jsx(B,{eRef:a.mz,label:"Urbanizacion",className:"w-full",value:x.mz,name:"mz",handleDatosFinales:b})}),t.jsx("div",{className:"md:col-span-1",children:t.jsx(B,{required:!0,sendForm:g,eRef:a.postalCode,label:"C√≥digo postal",placeholder:"",className:"w-full",value:x.postal_code,name:"postal_code",handleDatosFinales:b})})]}),t.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 w-full text-neutral-900",children:[t.jsx("div",{className:"md:col-span-1",children:t.jsx(B,{required:!0,sendForm:g,eRef:a.department,label:"Departamento",placeholder:"Departamento...",className:"w-full",value:x.department,name:"department",handleDatosFinales:b})}),t.jsx("div",{className:"md:col-span-1",children:t.jsx(B,{required:!0,sendForm:g,eRef:a.province,label:"Provincia",placeholder:"",className:"w-full",value:x.province,name:"province",handleDatosFinales:b})}),t.jsx("div",{className:"md:col-span-1",children:t.jsx(B,{required:!0,sendForm:g,eRef:a.district,label:"Distrito",placeholder:"Seleccionar",className:"w-full",value:x.district,name:"district",handleDatosFinales:b})})]}),t.jsx("section",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 w-full",children:t.jsx("div",{className:"md:col-span-2",children:t.jsxs("div",{className:"w-full",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de domicilio"}),t.jsxs("div",{children:[t.jsx(lt,{name:"residenceType",required:!0,sendForm:g,styles:T,options:O,onChange:D,value:O.find(y=>y.value===x.residenceType),placeholder:"Selecciona Tipo de Domicilio",className:"gap-2 self-stretch px-6 py-1.5 mt-4 w-full text-sm tracking-wide rounded-2xl border border-solid border-stone-300 max-md:px-5 max-md:max-w-full"}),g&&x.residenceType==""&&t.jsx("span",{className:"text-red-500 text-sm mt-1",children:"Este campo es obligatorio"})]}),x.residenceType==="Otro"&&t.jsx("input",{type:"text",placeholder:"Ingresa Tipo de Domicilio",value:x.otherResidenceType,onChange:P,className:"gap-2 self-stretch px-6 py-4 mt-4 w-full text-sm tracking-wide rounded-2xl border border-solid border-stone-300 max-md:px-5 max-md:max-w-full"})]})})}),t.jsx(B,{required:!0,sendForm:g,eRef:a.reference,label:"# Dpto, Ofic o Referencia",className:"w-full mt-4",value:x.reference,name:"reference",handleDatosFinales:b}),t.jsxs("p",{className:"mt-8 text-sm font-light",children:["Todos los campos con un ",t.jsx("span",{className:"text-red-500 font-bold text-[20px]",children:"*"})," son obligatorios."]}),t.jsx("p",{className:"mt-8 text-green-800",children:"Si la informaci√≥n es incorrecta, no podemos garantizar la entrega."}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between mt-8 w-full",children:[t.jsx(Ce,{variant:"secondary",color:"green",className:"w-full md:w-auto",callback:_,children:"Cerrar"}),t.jsx(Ce,{variant:"secondary",color:"green",className:"w-full md:w-auto",callback:L,children:"Siguiente"})]})]})})}function Lt({title:e,callback:r}){return t.jsxs("div",{className:"text-sm flex flex-wrap gap-1 items-center w-full  tracking-wide text-neutral-900 text-opacity-80 max-md:max-w-full",children:[t.jsx("input",{onChange:r,type:"checkbox",className:"h-5 w-5  focus:ring-0  text-[#FF8555]  focus:border-orange-400  rounded-md border-[#FF8555]"}),t.jsx("p",{className:"flex-1 shrink self-stretch my-auto basis-0 max-md:max-w-full ml-2",children:e})]})}/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),st=(...e)=>e.filter((r,n,a)=>!!r&&a.indexOf(r)===n).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=d.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:i,iconNode:f,...p},x)=>d.createElement("svg",{ref:x,...Bt,width:r,height:r,stroke:e,strokeWidth:a?Number(n)*24/Number(r):n,className:st("lucide",o),...p},[...f.map(([l,g])=>d.createElement(l,g)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=(e,r)=>{const n=d.forwardRef(({className:a,...o},i)=>d.createElement(Mt,{ref:i,iconNode:r,className:st(`lucide-${zt(e)}`,a),...o}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=ct("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=ct("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function qt({addresses:e,onSelectAddress:r=()=>{},selected:n=null,setIsModalOpen:a=()=>{}}){const[o,i]=d.useState(!1),f=d.useRef(null);d.useEffect(()=>{function l(g){f.current&&!f.current.contains(g.target)&&i(!1)}return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[]);const p=l=>{r(l.id),i(!1)},x=(l,g=!0)=>{var A;let j=!0,_=l.price!==null;return l.price&&l.price.price>0&&(j=!1),t.jsxs("a",{href:"javascript:void(0)",className:`block px-4 py-2 text-sm text-gray-900 ${_?"hover:bg-gray-100 hover:text-gray-900":"cursor-not-allowed"} border-b`,role:"menuitem",onClick:T=>{_&&g&&(T.preventDefault(),p(l))},children:[t.jsxs("p",{className:"text-orange-500",children:["Destinatario: ",((A=l.address_data)==null?void 0:A.fullname)??"Sin destinatario"]}),t.jsxs("p",{className:"line-clamp-2 text-ellipsis mb-1",children:[l.is_default==1&&t.jsx("i",{className:"mdi mdi-star text-yellow-500 me-1"}),l.address_full]}),_?t.jsxs("p",{className:"text-gray-500",children:["Costo de env√≠o:"," ",t.jsxs("span",{className:`inline-flex items-center ${j?"bg-green-100":"bg-blue-100"} ${j?"text-green-800":"text-blue-800"} text-xs font-medium px-2.5 py-0.5 rounded-full dark:${j?"bg-green-900":"bg-blue-900"} dark:${j?"text-green-300":"text-blue-300"}`,children:[t.jsx("span",{className:`w-2 h-2 me-1 ${j?"bg-green-500":"bg-blue-500"} rounded-full`}),j?"Gratis":`S/. ${Number(l.price.price).toFixed(2)}`]})]}):t.jsx("p",{className:"text-red-500",children:"No hay cobertura"})]},l.id)};return t.jsxs("div",{className:"relative inline-block text-left py-[2.5%]",ref:f,children:[t.jsx("p",{className:"text-gray-500 mb-1",children:"Selecciona una de tus direcciones o agrega una nueva"}),t.jsx("div",{children:t.jsx("button",{type:"button",className:`block w-full rounded-md border border-gray-300 shadow-sm ${n!==null?"text-start":"px-4 py-2 bg-green-800 text-white"} text-sm font-medium  focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-100 focus:ring-green-500`,onClick:()=>i(!o),children:n===null?t.jsxs(t.Fragment,{children:["Selecciona una de tus direcciones",t.jsx(dt,{className:"ml-2 -mr-1 h-5 w-5","aria-hidden":"true"})]}):n==0?t.jsxs("span",{className:"block px-4 py-2",children:["Selecciona uno de tus destinatarios",t.jsx("i",{className:"mdi mdi-chevron-down ms-1"})]}):t.jsx(t.Fragment,{children:x(e.find(l=>l.id==n),!1)})})}),o&&t.jsx("div",{className:"origin-top-right absolute right-0 mt-2 w-full rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",children:t.jsx("div",{className:"py-1",role:"menu","aria-orientation":"vertical","aria-labelledby":"options-menu",children:e.map(l=>x(l))})})]})}function ie(e,r,n,a){function o(i){return i instanceof n?i:new n(function(f){f(i)})}return new(n||(n=Promise))(function(i,f){function p(g){try{l(a.next(g))}catch(j){f(j)}}function x(g){try{l(a.throw(g))}catch(j){f(j)}}function l(g){g.done?i(g.value):o(g.value).then(p,x)}l((a=a.apply(e,r||[])).next())})}function oe(e,r){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,o,i,f;return f={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(l){return function(g){return x([l,g])}}function x(l){if(a)throw new TypeError("Generator is already executing.");for(;f&&(f=0,l[0]&&(n=0)),n;)try{if(a=1,o&&(i=l[0]&2?o.return:l[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,l[1])).done)return i;switch(o=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,o=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){n.label=l[1];break}if(l[0]===6&&n.label<i[1]){n.label=i[1],i=l;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(l);break}i[2]&&n.ops.pop(),n.trys.pop();continue}l=r.call(e,n)}catch(g){l=[6,g],o=0}finally{a=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ve(e,r){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),o,i=[],f;try{for(;(r===void 0||r-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(p){f={error:p}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(f)throw f.error}}return i}function Ye(e,r,n){if(n||arguments.length===2)for(var a=0,o=r.length,i;a<o;a++)(i||!(a in r))&&(i||(i=Array.prototype.slice.call(r,0,a)),i[a]=r[a]);return e.concat(i||Array.prototype.slice.call(r))}var Kt=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function he(e,r){var n=Ut(e);if(typeof n.path!="string"){var a=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof r=="string"?r:typeof a=="string"&&a.length>0?a:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function Ut(e){var r=e.name,n=r&&r.lastIndexOf(".")!==-1;if(n&&!e.type){var a=r.split(".").pop().toLowerCase(),o=Kt.get(a);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var Wt=[".DS_Store","Thumbs.db"];function Ht(e){return ie(this,void 0,void 0,function(){return oe(this,function(r){return Se(e)&&Gt(e.dataTransfer)?[2,Qt(e.dataTransfer,e.type)]:Vt(e)?[2,Yt(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,Jt(e)]:[2,[]]})})}function Gt(e){return Se(e)}function Vt(e){return Se(e)&&Se(e.target)}function Se(e){return typeof e=="object"&&e!==null}function Yt(e){return $e(e.target.files).map(function(r){return he(r)})}function Jt(e){return ie(this,void 0,void 0,function(){var r;return oe(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(a){return a.getFile()}))];case 1:return r=n.sent(),[2,r.map(function(a){return he(a)})]}})})}function Qt(e,r){return ie(this,void 0,void 0,function(){var n,a;return oe(this,function(o){switch(o.label){case 0:return e.items?(n=$e(e.items).filter(function(i){return i.kind==="file"}),r!=="drop"?[2,n]:[4,Promise.all(n.map(Zt))]):[3,2];case 1:return a=o.sent(),[2,Je(ut(a))];case 2:return[2,Je($e(e.files).map(function(i){return he(i)}))]}})})}function Je(e){return e.filter(function(r){return Wt.indexOf(r.name)===-1})}function $e(e){if(e===null)return[];for(var r=[],n=0;n<e.length;n++){var a=e[n];r.push(a)}return r}function Zt(e){if(typeof e.webkitGetAsEntry!="function")return Qe(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?ft(r):Qe(e)}function ut(e){return e.reduce(function(r,n){return Ye(Ye([],Ve(r),!1),Ve(Array.isArray(n)?ut(n):[n]),!1)},[])}function Qe(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var n=he(r);return Promise.resolve(n)}function Xt(e){return ie(this,void 0,void 0,function(){return oe(this,function(r){return[2,e.isDirectory?ft(e):er(e)]})})}function ft(e){var r=e.createReader();return new Promise(function(n,a){var o=[];function i(){var f=this;r.readEntries(function(p){return ie(f,void 0,void 0,function(){var x,l,g;return oe(this,function(j){switch(j.label){case 0:if(p.length)return[3,5];j.label=1;case 1:return j.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return x=j.sent(),n(x),[3,4];case 3:return l=j.sent(),a(l),[3,4];case 4:return[3,6];case 5:g=Promise.all(p.map(Xt)),o.push(g),i(),j.label=6;case 6:return[2]}})})},function(p){a(p)})}i()})}function er(e){return ie(this,void 0,void 0,function(){return oe(this,function(r){return[2,new Promise(function(n,a){e.file(function(o){var i=he(o,e.fullPath);n(i)},function(o){a(o)})})]})})}var tr=function(e,r){if(e&&r){var n=Array.isArray(r)?r:r.split(","),a=e.name||"",o=(e.type||"").toLowerCase(),i=o.replace(/\/.*$/,"");return n.some(function(f){var p=f.trim().toLowerCase();return p.charAt(0)==="."?a.toLowerCase().endsWith(p):p.endsWith("/*")?i===p.replace(/\/.*$/,""):o===p})}return!0};function Ze(e){return ar(e)||nr(e)||pt(e)||rr()}function rr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ar(e){if(Array.isArray(e))return qe(e)}function Xe(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,a)}return n}function et(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Xe(Object(n),!0).forEach(function(a){mt(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function mt(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function ge(e,r){return lr(e)||or(e,r)||pt(e,r)||ir()}function ir(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt(e,r){if(e){if(typeof e=="string")return qe(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qe(e,r)}}function qe(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function or(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],o=!0,i=!1,f,p;try{for(n=n.call(e);!(o=(f=n.next()).done)&&(a.push(f.value),!(r&&a.length===r));o=!0);}catch(x){i=!0,p=x}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw p}}return a}}function lr(e){if(Array.isArray(e))return e}var sr="file-invalid-type",cr="file-too-large",dr="file-too-small",ur="too-many-files",fr=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var n=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:sr,message:"File type must be ".concat(n)}},tt=function(r){return{code:cr,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},rt=function(r){return{code:dr,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},mr={code:ur,message:"Too many files"};function xt(e,r){var n=e.type==="application/x-moz-file"||tr(e,r);return[n,n?null:fr(r)]}function gt(e,r,n){if(re(e.size))if(re(r)&&re(n)){if(e.size>n)return[!1,tt(n)];if(e.size<r)return[!1,rt(r)]}else{if(re(r)&&e.size<r)return[!1,rt(r)];if(re(n)&&e.size>n)return[!1,tt(n)]}return[!0,null]}function re(e){return e!=null}function pr(e){var r=e.files,n=e.accept,a=e.minSize,o=e.maxSize,i=e.multiple,f=e.maxFiles,p=e.validator;return!i&&r.length>1||i&&f>=1&&r.length>f?!1:r.every(function(x){var l=xt(x,n),g=ge(l,1),j=g[0],_=gt(x,a,o),A=ge(_,1),T=A[0],C=p?p(x):null;return j&&T&&!C})}function Fe(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function Ne(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function nt(e){e.preventDefault()}function xr(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function gr(e){return e.indexOf("Edge/")!==-1}function hr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return xr(e)||gr(e)}function Q(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(a){for(var o=arguments.length,i=new Array(o>1?o-1:0),f=1;f<o;f++)i[f-1]=arguments[f];return r.some(function(p){return!Fe(a)&&p&&p.apply(void 0,[a].concat(i)),Fe(a)})}}function br(){return"showOpenFilePicker"in window}function vr(e){if(re(e)){var r=Object.entries(e).filter(function(n){var a=ge(n,2),o=a[0],i=a[1],f=!0;return ht(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),f=!1),(!Array.isArray(i)||!i.every(bt))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),f=!1),f}).reduce(function(n,a){var o=ge(a,2),i=o[0],f=o[1];return et(et({},n),{},mt({},i,f))},{});return[{description:"Files",accept:r}]}return e}function yr(e){if(re(e))return Object.entries(e).reduce(function(r,n){var a=ge(n,2),o=a[0],i=a[1];return[].concat(Ze(r),[o],Ze(i))},[]).filter(function(r){return ht(r)||bt(r)}).join(",")}function jr(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function wr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function ht(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function bt(e){return/^.*\.[\w]+$/.test(e)}var Nr=["children"],Dr=["open"],Cr=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Sr=["refKey","onChange","onClick"];function Fr(e){return Or(e)||Er(e)||vt(e)||Ar()}function Ar(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Er(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Or(e){if(Array.isArray(e))return Ke(e)}function Me(e,r){return Tr(e)||_r(e,r)||vt(e,r)||kr()}function kr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vt(e,r){if(e){if(typeof e=="string")return Ke(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ke(e,r)}}function Ke(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=e[n];return a}function _r(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var a=[],o=!0,i=!1,f,p;try{for(n=n.call(e);!(o=(f=n.next()).done)&&(a.push(f.value),!(r&&a.length===r));o=!0);}catch(x){i=!0,p=x}finally{try{!o&&n.return!=null&&n.return()}finally{if(i)throw p}}return a}}function Tr(e){if(Array.isArray(e))return e}function at(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,a)}return n}function k(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?at(Object(n),!0).forEach(function(a){Ue(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ue(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function Ae(e,r){if(e==null)return{};var n=Pr(e,r),a,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)a=i[o],!(r.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Pr(e,r){if(e==null)return{};var n={},a=Object.keys(e),o,i;for(i=0;i<a.length;i++)o=a[i],!(r.indexOf(o)>=0)&&(n[o]=e[o]);return n}var Ge=d.forwardRef(function(e,r){var n=e.children,a=Ae(e,Nr),o=jt(a),i=o.open,f=Ae(o,Dr);return d.useImperativeHandle(r,function(){return{open:i}},[i]),ot.createElement(d.Fragment,null,n(k(k({},f),{},{open:i})))});Ge.displayName="Dropzone";var yt={disabled:!1,getFilesFromEvent:Ht,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Ge.defaultProps=yt;Ge.propTypes={children:F.func,accept:F.objectOf(F.arrayOf(F.string)),multiple:F.bool,preventDropOnDocument:F.bool,noClick:F.bool,noKeyboard:F.bool,noDrag:F.bool,noDragEventsBubbling:F.bool,minSize:F.number,maxSize:F.number,maxFiles:F.number,disabled:F.bool,getFilesFromEvent:F.func,onFileDialogCancel:F.func,onFileDialogOpen:F.func,useFsAccessApi:F.bool,autoFocus:F.bool,onDragEnter:F.func,onDragLeave:F.func,onDragOver:F.func,onDrop:F.func,onDropAccepted:F.func,onDropRejected:F.func,onError:F.func,validator:F.func};var We={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function jt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=k(k({},yt),e),n=r.accept,a=r.disabled,o=r.getFilesFromEvent,i=r.maxSize,f=r.minSize,p=r.multiple,x=r.maxFiles,l=r.onDragEnter,g=r.onDragLeave,j=r.onDragOver,_=r.onDrop,A=r.onDropAccepted,T=r.onDropRejected,C=r.onFileDialogCancel,E=r.onFileDialogOpen,$=r.useFsAccessApi,b=r.autoFocus,L=r.preventDropOnDocument,D=r.noClick,P=r.noKeyboard,O=r.noDrag,y=r.noDragEventsBubbling,s=r.onError,v=r.validator,S=d.useMemo(function(){return yr(n)},[n]),w=d.useMemo(function(){return vr(n)},[n]),X=d.useMemo(function(){return typeof E=="function"?E:it},[E]),G=d.useMemo(function(){return typeof C=="function"?C:it},[C]),I=d.useRef(null),z=d.useRef(null),Ee=d.useReducer(Ir,We),le=Me(Ee,2),se=le[0],U=le[1],be=se.isFocused,ve=se.isFileDialogActive,V=d.useRef(typeof window<"u"&&window.isSecureContext&&$&&br()),ce=function(){!V.current&&ve&&setTimeout(function(){if(z.current){var h=z.current.files;h.length||(U({type:"closeDialog"}),G())}},300)};d.useEffect(function(){return window.addEventListener("focus",ce,!1),function(){window.removeEventListener("focus",ce,!1)}},[z,ve,G,V]);var Z=d.useRef([]),de=function(h){I.current&&I.current.contains(h.target)||(h.preventDefault(),Z.current=[])};d.useEffect(function(){return L&&(document.addEventListener("dragover",nt,!1),document.addEventListener("drop",de,!1)),function(){L&&(document.removeEventListener("dragover",nt),document.removeEventListener("drop",de))}},[I,L]),d.useEffect(function(){return!a&&b&&I.current&&I.current.focus(),function(){}},[I,b,a]);var J=d.useCallback(function(u){s?s(u):console.error(u)},[s]),ue=d.useCallback(function(u){u.preventDefault(),u.persist(),je(u),Z.current=[].concat(Fr(Z.current),[u.target]),Ne(u)&&Promise.resolve(o(u)).then(function(h){if(!(Fe(u)&&!y)){var R=h.length,M=R>0&&pr({files:h,accept:S,minSize:f,maxSize:i,multiple:p,maxFiles:x,validator:v}),H=R>0&&!M;U({isDragAccept:M,isDragReject:H,isDragActive:!0,type:"setDraggedFiles"}),l&&l(u)}}).catch(function(h){return J(h)})},[o,l,J,y,S,f,i,p,x,v]),fe=d.useCallback(function(u){u.preventDefault(),u.persist(),je(u);var h=Ne(u);if(h&&u.dataTransfer)try{u.dataTransfer.dropEffect="copy"}catch{}return h&&j&&j(u),!1},[j,y]),me=d.useCallback(function(u){u.preventDefault(),u.persist(),je(u);var h=Z.current.filter(function(M){return I.current&&I.current.contains(M)}),R=h.indexOf(u.target);R!==-1&&h.splice(R,1),Z.current=h,!(h.length>0)&&(U({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ne(u)&&g&&g(u))},[I,g,y]),ee=d.useCallback(function(u,h){var R=[],M=[];u.forEach(function(H){var pe=xt(H,S),ae=Me(pe,2),ke=ae[0],_e=ae[1],Te=gt(H,f,i),we=Me(Te,2),Pe=we[0],Ie=we[1],Re=v?v(H):null;if(ke&&Pe&&!Re)R.push(H);else{var Le=[_e,Ie];Re&&(Le=Le.concat(Re)),M.push({file:H,errors:Le.filter(function(Ct){return Ct})})}}),(!p&&R.length>1||p&&x>=1&&R.length>x)&&(R.forEach(function(H){M.push({file:H,errors:[mr]})}),R.splice(0)),U({acceptedFiles:R,fileRejections:M,type:"setFiles"}),_&&_(R,M,h),M.length>0&&T&&T(M,h),R.length>0&&A&&A(R,h)},[U,p,S,f,i,x,_,A,T,v]),te=d.useCallback(function(u){u.preventDefault(),u.persist(),je(u),Z.current=[],Ne(u)&&Promise.resolve(o(u)).then(function(h){Fe(u)&&!y||ee(h,u)}).catch(function(h){return J(h)}),U({type:"reset"})},[o,ee,J,y]),m=d.useCallback(function(){if(V.current){U({type:"openDialog"}),X();var u={multiple:p,types:w};window.showOpenFilePicker(u).then(function(h){return o(h)}).then(function(h){ee(h,null),U({type:"closeDialog"})}).catch(function(h){jr(h)?(G(h),U({type:"closeDialog"})):wr(h)?(V.current=!1,z.current?(z.current.value=null,z.current.click()):J(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):J(h)});return}z.current&&(U({type:"openDialog"}),X(),z.current.value=null,z.current.click())},[U,X,G,$,ee,J,w,p]),c=d.useCallback(function(u){!I.current||!I.current.isEqualNode(u.target)||(u.key===" "||u.key==="Enter"||u.keyCode===32||u.keyCode===13)&&(u.preventDefault(),m())},[I,m]),N=d.useCallback(function(){U({type:"focus"})},[]),q=d.useCallback(function(){U({type:"blur"})},[]),W=d.useCallback(function(){D||(hr()?setTimeout(m,0):m())},[D,m]),K=function(h){return a?null:h},Oe=function(h){return P?null:K(h)},ye=function(h){return O?null:K(h)},je=function(h){y&&h.stopPropagation()},wt=d.useMemo(function(){return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=u.refKey,R=h===void 0?"ref":h,M=u.role,H=u.onKeyDown,pe=u.onFocus,ae=u.onBlur,ke=u.onClick,_e=u.onDragEnter,Te=u.onDragOver,we=u.onDragLeave,Pe=u.onDrop,Ie=Ae(u,Cr);return k(k(Ue({onKeyDown:Oe(Q(H,c)),onFocus:Oe(Q(pe,N)),onBlur:Oe(Q(ae,q)),onClick:K(Q(ke,W)),onDragEnter:ye(Q(_e,ue)),onDragOver:ye(Q(Te,fe)),onDragLeave:ye(Q(we,me)),onDrop:ye(Q(Pe,te)),role:typeof M=="string"&&M!==""?M:"presentation"},R,I),!a&&!P?{tabIndex:0}:{}),Ie)}},[I,c,N,q,W,ue,fe,me,te,P,O,a]),Nt=d.useCallback(function(u){u.stopPropagation()},[]),Dt=d.useMemo(function(){return function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=u.refKey,R=h===void 0?"ref":h,M=u.onChange,H=u.onClick,pe=Ae(u,Sr),ae=Ue({accept:S,multiple:p,type:"file",style:{display:"none"},onChange:K(Q(M,te)),onClick:K(Q(H,Nt)),tabIndex:-1},R,z);return k(k({},ae),pe)}},[z,n,p,te,a]);return k(k({},se),{},{isFocused:be&&!a,getRootProps:wt,getInputProps:Dt,rootRef:I,inputRef:z,open:K(m)})}function Ir(e,r){switch(r.type){case"focus":return k(k({},e),{},{isFocused:!0});case"blur":return k(k({},e),{},{isFocused:!1});case"openDialog":return k(k({},We),{},{isFileDialogActive:!0});case"closeDialog":return k(k({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return k(k({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return k(k({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return k({},We);default:return e}}function it(){}function Rr({cartItems:e,costoEnvio:r,historicoCupones:n=[],points:a,userPoints:o}){var T,C,E,$;const[i,f]=d.useState(new Set),p=He(a),[x,l]=d.useState(p),g=d.useRef(!1),j=b=>{f(L=>{const D=new Set(L);return D.has(b)?D.delete(b):D.add(b),D})};d.useEffect(()=>{let b=0,L;n.length>0&&(L=n[0].cupon??{},L.porcentaje==1?b=p*L.monto/100:b=L.monto,g.current=!0);const D=Number(p)+Number(r)-b;l(D)},[r,p,n]);const A=`${((C=(T=n[0])==null?void 0:T.cupon)==null?void 0:C.porcentaje)==1?"%":"S/"} ${Number(($=(E=n[0])==null?void 0:E.cupon)==null?void 0:$.monto).toFixed(0)}`;return t.jsxs("div",{className:"max-w-sm mx-auto p-2 bg-white text-gray-800 font-sans w-full",children:[t.jsx("h1",{className:"text-xl font-semibold mb-4",children:"DETALLE DE COMPRAS"}),e.map(b=>{let L=structuredClone(b.cantidad);for(let P=0;P<b.cantidad;P++)b.usePoints&&o>=b.points&&(L--,o-=b.points);const D=L*b.precio;return t.jsxs("div",{className:"border-b pb-4 mb-4",children:[t.jsxs("div",{className:"flex justify-between items-start mb-2",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"font-semibold",children:b.producto}),t.jsx("p",{className:"text-sm text-gray-600",children:b.extracto}),b.usePoints&&t.jsx("span",{className:"text-orange-500 text-sm",children:"Usando puntos"}),t.jsxs("p",{className:"text-sm text-gray-600",children:["SKU: ",b.sku]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-semibold",children:["S/ ",D]}),t.jsxs("p",{className:"text-sm",children:["Cantidad: ",b.cantidad]})]})]}),t.jsx("button",{onClick:()=>j(b.id),className:"flex items-center text-blue-600 text-sm",children:i.has(b.id)?t.jsxs(t.Fragment,{children:[t.jsx($t,{className:"w-4 h-4 mr-1"}),"Ocultar imagen"]}):t.jsxs(t.Fragment,{children:[t.jsx(dt,{className:"w-4 h-4 mr-1"}),"Ver imagen"]})}),i.has(b.id)&&t.jsx("img",{src:`/${b.imagen}`,alt:b.producto,className:"mt-2 w-24 h-24 object-cover rounded"})]},b.id)}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Sub Total"}),t.jsxs("span",{children:["S/ ",p]})]}),n.length>0&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Descuento"}),t.jsx("span",{children:A})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{children:"Costo de env√≠o"}),t.jsxs("span",{children:["S/ ",Number(r).toFixed(0)]})]}),t.jsxs("div",{className:"flex justify-between font-semibold text-base",children:[t.jsx("span",{children:"Total"}),t.jsxs("span",{children:["S/ ",Number(x).toFixed(0)]})]})]})]})}function Lr({telefono:e,texto:r,datosFinales:n,historicoCupones:a,carrito:o,costoEnvio:i,setIsModalOpen:f,points:p}){const x=d.useRef(null),l=async D=>{const{type:P,full:O}=await File.compress(D,{square:!1,full_length:750});return`data:${P};base64,${O}`},[g,j]=d.useState([]),_=d.useCallback(async D=>{let P=document.getElementById("capturaTransferencia"),O=D[0];j(D.map(s=>Object.assign(s,{preview:URL.createObjectURL(s)}))),x.current=await l(O);let y=new FileReader;y.onload=function(s){let v=new DataTransfer;v.items.add(O),P.files=v.files,P.tagName==="IMG"&&(P.src=s.target.result)},y.readAsDataURL(O)},[]),{getRootProps:A,getInputProps:T,isDragActive:C,acceptedFiles:E}=jt({onDrop:_}),$=g.map(D=>t.jsx("div",{className:"thumb",children:t.jsx("div",{className:"thumb-inner text-center ",children:t.jsx("img",{src:D.preview,className:"img-preview max-h-96 block m-auto",alt:"Preview"})})},D.name)),b=E.map(D=>t.jsxs("li",{children:[D.path," - ",(D.size/1024).toFixed(2)," kbytes"]},D.path)),L=async D=>{D.preventDefault();let P=!0;if(console.log(D.target.dataset.type),D.target.dataset.type!=="whatsapp"&&(P=!1,console.log(P),!x.current))return Swal.fire({icon:"warning",title:"Falta la imagen",text:"Por favor agregue un imagen antes de continuar",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"});console.log(P),Local.set("payment-data",{address:n.address,dedication:n.dedication,billing:n.billing,consumer:n.consumer});const O=Local.get("carrito")??[],y=Local.get("payment-data")??{};let s=O.map(w=>({id:w.id,imagen:w.imagen,quantity:w.cantidad,usePoints:w.usePoints||!1}));const v=new FormData;v.append("datosFinales",ne.JSON.stringify(n)),v.append("img",x.current),v.append("paymentData",ne.JSON.stringify(y)),v.append("cart",ne.JSON.stringify(s));let S={cart:O.map(w=>({id:w.id,imagen:w.imagen,quantity:w.cantidad,usePoints:w.usePoints||!1})),...y,img:x.current};try{const w=await De.post("/api/payment/pagarConTransferencia",S,{headers:{"Content-Type":"multipart/form-data"}});let{status:X,message:G,data:I}=w.data;X==200&&(Swal.fire({icon:"success",title:"Pago realizado con √©xito",text:G,showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"}),Local.delete("carrito"),Local.delete("payment-data"),setTimeout(()=>{let z=P?`/agradecimiento?code=${I.reference_code}&whatsapp=true `:`/agradecimiento?code=${I.reference_code}`;location.href=z},1500))}catch(w){console.error("Error al enviar la solicitud:",w)}};return t.jsxs("div",{className:"max-w-md mx-auto bg-white p-6 rounded-lg ",children:[t.jsxs("div",{className:"text-center mb-6 flex flex-col justify-center content-center items-center",children:[t.jsx("img",{src:"/img_donas/selloCoral.png",alt:"",className:"h-48 w-48 text-center"}),t.jsx("h1",{className:"text-3xl font-bold text-green-600 mb-2",children:"¬°Felicitaciones!"})]}),t.jsxs("div",{className:"text-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold text-green-600 mb-2"}),t.jsx("p",{className:"mb-2",children:"¬°Est√°s a un paso de completar tu compra üíê! Realiza la transferencia/dep√≥sito a nuestras cuentas, o paga a trav√©s de YAPE o PLIN. "}),t.jsx("p",{className:"mb-2",children:"Luego, simplemente carga la imagen y env√≠anos la confirmaci√≥n de pago. ¬°Y listo üí´!"}),t.jsx("p",{className:"mb-2",children:"Tambi√©n puedes enviarnos tu confirmaci√≥n de pago a trav√©s de WhatsApp."})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"col-span-1 flex items-center w-full",children:[t.jsx("img",{src:"/img_donas/bancos/bcp2.jpg",alt:"BCP",className:"w-10 rounded-lg object-cover object-center"}),t.jsx("span",{className:"ml-2",children:"191-2769586721"})]}),t.jsxs("div",{className:"col-span-1 flex items-center",children:[t.jsx("img",{src:"/img_donas/bancos/scotia2.png",alt:"Scotiabank",className:"w-10 object-cover object-center rounded-lg"}),t.jsx("span",{className:"ml-2",children:"151-0020074"})]}),t.jsxs("div",{className:"col-span-1 flex items-center",children:[t.jsx("img",{src:"/img_donas/bancos/bbvau.png",alt:"BBVA",className:"w-10 object-cover object-center rounded-lg"}),t.jsx("span",{className:"ml-2",children:"0011-0175-0200359715"})]}),t.jsxs("div",{className:"col-span-1 flex items-center",children:[t.jsx("img",{src:"/img_donas/bancos/interb.png",alt:"Interbank",className:"w-10 object-cover object-center rounded-lg"}),t.jsx("span",{className:"ml-2",children:"200-3026726544"})]})]}),t.jsxs("div",{className:"flex items-center justify-center mb-6",children:[t.jsx("img",{src:"/img_donas/bancos/yapePlin.png",alt:"Yape Plin",className:" w-28"}),t.jsxs("div",{className:"",children:[t.jsx("p",{children:"987829046"}),t.jsx("p",{children:"Fabrizio Renato Valderrama Gonzaga"})]})]}),t.jsx("div",{className:"flex flex-col w-full my-8",children:t.jsx(Rr,{cartItems:o,costoEnvio:i,historicoCupones:a,points:p,userPoints:p})}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"cursor-pointer h-26 w-full py-2 px-4 border block text-center border-green-500 text-green-500 rounded-md hover:bg-green-50 transition-colors duration-300 relative",children:t.jsxs("div",{...A(),children:[t.jsx("input",{...T()}),C?t.jsx("p",{children:"Sueltas tur archivos aqui ..."}):t.jsxs(t.Fragment,{children:[t.jsx("p",{children:" 1. Cargar confirmaci√≥n de pago"}),t.jsx("br",{})," "]}),t.jsx("div",{className:"h-20  absolute top-[42%] right-[47%] opacity-80 ",children:t.jsx("svg",{className:"w-6 opacity-80",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:t.jsx("path",{d:"M149.1 64.8L138.7 96 64 96C28.7 96 0 124.7 0 160L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64l-74.7 0L362.9 64.8C356.4 45.2 338.1 32 317.4 32L194.6 32c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"})})}),b.length>0&&t.jsxs(t.Fragment,{children:[t.jsx("h4",{className:"mt-8",children:"Archivo Cargado"}),t.jsx("div",{className:"thumbs-container",children:$})]})]})}),t.jsx("button",{"data-type":"normal",type:"submit",form:"formPrincipal",onClick:L,className:"w-full py-2 px-4 border  block text-center border-green-500 text-green-500 rounded-full hover:text-white  hover:bg-[#ff8555] transition-colors duration-300",children:"2. Enviar Imagen"})]}),t.jsx("p",{className:"mt-4 text-center",children:" O "}),t.jsx("div",{className:"mt-4",children:t.jsx("button",{"data-type":"whatsapp",type:"submit",form:"formPrincipal",onClick:L,className:`w-full py-2 px-4 border  block text-center border-green-500 text-green-500 rounded-full hover:text-white  
        hover:bg-[#ff8555] transition-colors duration-300`,children:"Enviar Pago por WhatsApp"})})]})}const zr={control:e=>({...e,outline:"none",boxShadow:"none",borderColor:"transparent",borderRight:"none","&:hover":{borderColor:"transparent"},fontFamily:"Arial, sans-serif",fontSize:"14px"}),menu:e=>({...e,width:"90%"}),option:e=>({...e,fontSize:"0.875rem",padding:"8px 12px",fontFamily:"Arial, sans-serif",opacity:"0.8"}),indicatorSeparator:()=>({display:"none"})},Br=e=>t.jsx("div",{children:t.jsx(Et.Option,{...e,children:t.jsxs("div",{"data-tooltip-id":`tooltip-${e.data.value}`,"data-tooltip-content":e.data.description,className:"line-clamp-3",children:[t.jsx("div",{className:"font-bold",children:e.data.label}),t.jsx("div",{children:e.data.description})]})})}),Mr=({options:e,title:r,handleOptionChange:n})=>t.jsx("div",{children:t.jsx(lt,{className:"line-clamp gap-2 self-stretch px-6 py-1.5 mt-4 w-full text-sm tracking-wide rounded-3xl border border-solid border-stone-300 max-md:px-5 max-md:max-w-full",styles:zr,options:e.map(a=>({value:a.id,label:a.name,description:a.description})),placeholder:r,onChange:n,components:{Option:Br}})}),$r=({session:e,culqi_public_key:r,app_name:n,greetings:a,points:o,historicoCupones:i,general:f,addresses:p,defaultAddress:x})=>{var Z,de,J,ue,fe,me,ee,te;const[l,g]=d.useState(!1),[j,_]=d.useState(!1);d.useState(!1);const[A,T]=d.useState(0),[C,E]=d.useState(null),[$,b]=d.useState(!1);d.useEffect(()=>{$||(s.billing.type=="boleta"&&(C==null?void 0:C.length)==8?ne.Fetch("/api/people/search",{method:"POST",body:JSON.stringify({type:"dni",number:C})}).then(({status:m,result:c})=>{if(!m)return ne.Notify.add({icon:"/img_donas/icon.svg",title:"Error",body:(c==null?void 0:c.message)||"No se encontraron datos",type:"danger"});v(N=>{var q,W,K;return{...N,billing:{...N.billing,name:(q=c==null?void 0:c.data)==null?void 0:q.nombres,lastname:((W=c==null?void 0:c.data)==null?void 0:W.apellido_paterno)+" "+((K=c==null?void 0:c.data)==null?void 0:K.apellido_materno)}}}),b(!0)}):s.billing.type=="factura"&&(C==null?void 0:C.length)==11&&ne.Fetch("/api/people/search",{method:"POST",body:JSON.stringify({type:"ruc",number:C})}).then(({status:m,result:c})=>{if(!m)return ne.Notify.add({icon:"/img_donas/icon.svg",title:"Error",body:(c==null?void 0:c.message)||"No se encontraron datos",type:"danger"});v(N=>{var q,W;return{...N,billing:{...N.billing,name:(q=c==null?void 0:c.data)==null?void 0:q.nombre_o_razon_social,address:((W=c==null?void 0:c.data)==null?void 0:W.direccion_completa)||"Sin direccion"}}}),b(!0)}))},[C,$]);const[L,D]=d.useState(null),P=m=>{let c=a.find(N=>N.id===m.value);D(c),v(N=>({...N,dedicatoria:c.description,dedication:{...N.dedication,id:c.id,title:c.name,message:c.description}}))};d.useEffect(()=>{const m=document.createElement("script");return m.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC-U0GMdMa5ANO0unP7vVPaLGfnfZz-0so&libraries=places",m.async=!0,m.defer=!0,m.onload=()=>{g(!0)},document.body.appendChild(m),()=>{document.body.removeChild(m)}},[]);const[O,y]=d.useState(ze.Local.get("carrito")||[]),[s,v]=d.useState({address:{},dedication:{image:localStorage.getItem("imageDedicatoria")||null,message:""},billing:{type:"boleta",dni:((Z=e==null?void 0:e.person)==null?void 0:Z.document_number)||"",name:((de=e==null?void 0:e.person)==null?void 0:de.name)||"",lastname:((J=e==null?void 0:e.person)==null?void 0:J.lastname)||"",email:((ue=e==null?void 0:e.person)==null?void 0:ue.email)||(e==null?void 0:e.email)||""},consumer:{phone:((fe=e==null?void 0:e.person)==null?void 0:fe.phone)||(e==null?void 0:e.phone)||""},fecha:"",horario:"",telefono:"",zipcode:"",dedicatoria:"",mensaje:"",firma:"",comprobante:"",ruc:"",razonSocial:"",direccionFiscal:"",correoElectronico:""});if(O.length==0)return location.href="/";const S=m=>{v(c=>({...c,address:m})),z()},w=m=>{const c=new Date(m);if(isNaN(c))return"Not Set";const N={weekday:"long",year:"numeric",month:"long",day:"numeric"},q=new Intl.DateTimeFormat("es-ES",N).format(c);return q.charAt(0).toUpperCase()+q.slice(1)};d.useEffect(()=>{ze.Local.set("payment-data",{address:s.address,dedication:s.dedication,billing:s.billing,consumer:s.consumer})},[s]);const[X,G]=d.useState(!1),I=()=>{_(!j),v(m=>({...m,dedication:{...m.dedication,message:""}}))},z=()=>{ce(0),G(!X)};d.useEffect(()=>{Culqi.publicKey=r,Culqi.options({style:{logo:`${location.origin}/img_donas/icon.svg`,bannerColor:"#272727"}})},[null]);const Ee=m=>{var W;if(m.preventDefault(),!s.address.postal_code)return Y.fire({icon:"warning",title:"Falta Seleccionar una direcci√≥n",text:"Por favor, seleccione una direccion para continuar",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"});if(s.billing.type=="factura"&&(s.billing.ruc.length>11||s.billing.ruc.length<11))return Y.fire({icon:"warning",title:"Por favor, la longitud del RUC es incorrecta",text:"Por favor, la longitud del RUC debe ser de 11 digitos",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"});if(s.billing.type=="boleta"&&(s.billing.dni.length>9||s.billing.dni.length<8))return Y.fire({icon:"Warning",title:"Longitud de Documento de Identidad  incorrecta",text:"Por favor, la longitud del DNI debe ser de 8 digitos",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"});ze.Local.set("payment-data",{address:s.address,dedication:s.dedication,billing:s.billing,consumer:s.consumer});let c=He(o),N=0;const q=((W=i[0])==null?void 0:W.cupon)??0;i.length>0&&(q.porcentaje==1?N=c*q.monto/100:N=q.monto),c=c+Number(A)-N,Culqi.settings({title:n,currency:"PEN",amount:c*100}),Culqi.open()},le=d.useRef(null),se=()=>{const m=le.current;m&&(m.style.height="auto",m.style.height=`${m.scrollHeight}px`)};d.useEffect(()=>{se()},[s.dedication.message]);const[U,be]=d.useState(!1),ve=()=>{var c,N;const m=document.getElementById("formPrincipal");if(!m.checkValidity()){m.reportValidity();return}if(!((c=s==null?void 0:s.address)!=null&&c.fullname)||!((N=s==null?void 0:s.address)!=null&&N.phone)){G(!0),Y.fire({icon:"warning",title:"Falta informaci√≥n",text:"Por favor, complete los datos de la direcci√≥n de env√≠o",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"});return}if(!s.address.postal_code)return Y.fire({icon:"warning",title:"Falta Seleccionar una direcci√≥n",text:"Por favor, seleccione una direccion para continuar",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"});if(s.billing.type=="factura"&&(s.billing.ruc.length>11||s.billing.ruc.length<11))return Y.fire({icon:"warning",title:"Por favor, la longitud del RUC es incorrecta",text:"Por favor, la longitud del RUC debe ser de 11 digitos",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"});if(s.billing.type=="boleta"&&(s.billing.dni.length>9||s.billing.dni.length<8))return Y.fire({icon:"Warning",title:"Longitud de Documento de Identidad  incorrecta",text:"Por favor, la longitud del Documento de Identidad  debe ser de 8 digitos ",showConfirmButton:!0,showCancelButton:!1,confirmButtonText:"Aceptar",confirmButtonColor:"#138496"});Y.fire({title:' <span style="color: #22c55e;">¬°YA CASI ESTAMOS!</span> ',html:`
        <div class='px-[15%]'>
          <h1 class="text-2xl font-bold text-gray-600 text-center mb-10">
           Continuar con tu Compra
          </h1>
          <div class="space-y-4 mt-2">
            <button id="transferencia" class="w-full py-2 px-4 border block text-center border-green-500 text-green-500 rounded-full hover:text-white  hover:bg-[#ff8555] transition-colors duration-300">
              Pagar Con Transferencia
            </button>
            <button id="tarjeta" type="submit" form="formPrincipal"  class="w-full py-2 px-4 border  block text-center border-green-500 text-green-500 rounded-full hover:text-white  hover:bg-[#ff8555] transition-colors duration-300">
              Pagar con tarjeta
            </button>
          </div>
        </div>
      `,showConfirmButton:!1,didOpen:()=>{document.getElementById("transferencia").addEventListener("click",()=>{be(!0),Y.close()}),document.getElementById("tarjeta").addEventListener("click",()=>{})}})},[V,ce]=d.useState(((me=p.find(m=>m.is_default&&m.price!==null))==null?void 0:me.id)??0);return d.useEffect(()=>{var c;if(V==null)return;if(V==0){v(N=>({...N,address:{fullname:"",phone:"",fulladdress:"",street:"",number:"",mz:"",department:"",province:"",district:"",residenceType:"",reference:"",postal_code:"",coordinates:{latitude:0,longitude:0},entrega:{fecha:O[0].fecha,horario:`${O[0].horario.id} `}}})),T(0);return}const m=p.find(N=>N.id==V);v(N=>({...N,address:{...N.address,coordinates:{latitude:m.address_latitude,longitude:m.address_longitude},...m.address_data,id:m.id,entrega:{fecha:O[0].fecha,horario:`${O[0].horario.id} `}}})),T(((c=m==null?void 0:m.price)==null?void 0:c.price)||0)},[V]),d.useEffect(()=>{},[s]),t.jsxs(t.Fragment,{children:[t.jsxs("form",{className:"mb-24",onSubmit:Ee,id:"formPrincipal",children:[t.jsxs("div",{className:"mt-12 px-[5%] md:px-[8%] font-b_slick_bold",children:[t.jsx("span",{children:"Home / Validaci√≥n de pedido"}),t.jsx("div",{className:"mt-8",children:t.jsx("h1",{className:"text-[#112212] font-bold text-2xl md:text-4xl",children:"CARRITO DE COMPRAS"})}),t.jsx("div",{className:"flex flex-col w-full my-8",children:t.jsx(Tt,{historicoCupones:i,carrito:O,costoEnvio:A,setIsModalOpen:G,points:o})}),t.jsx("div",{className:"text-center max-w-4xl content-center justify-center mx-auto",children:t.jsxs("div",{class:"stepper-wrapper !font-b_slick_bold",children:[t.jsxs("div",{class:"stepper-item completed",children:[t.jsx("div",{class:"step-name",children:"Iniciar sesi√≥n"}),t.jsx("div",{class:"step-counter"})]}),t.jsxs("div",{class:"stepper-item completed",children:[t.jsx("div",{class:"step-name -mt-5 md:mt-0",children:"Datos de env√≠o y formas de pago"}),t.jsx("div",{class:"step-counter"})]}),t.jsxs("div",{class:"stepper-item active",children:[t.jsx("div",{class:"step-name",children:"Confirmaci√≥n"}),t.jsx("div",{class:"step-counter"})]})]})}),t.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 md:gap-20 pt-10 w-full",children:[t.jsxs("div",{className:"flex flex-col w-full",children:[t.jsx(Pt,{date:w(O[0].fecha),time:"12:00 pm - 4:00 pm",iconSrc:"https://cdn.builder.io/api/v1/image/assets/TEMP/008ab4d0d8aefa2f2fc7a83e847e76459be3aff9fcca7c4d2dec680f5127ecd2?placeholderIfAbsent=true&apiKey=b6f214df1e0f4f5eae4157d4f12e0ba3"}),t.jsx("section",{className:"flex flex-col mt-6 w-full max-md:max-w-full",children:t.jsx(B,{label:"1. Confirma tu telefono",name:"phone",defaultValue:s.telefono,type:"number",value:s.consumer.phone,required:!0,handleDatosFinales:m=>{v(c=>({...c,consumer:{...c.consumer,phone:m.target.value}}))}})}),t.jsxs("section",{className:"flex flex-col mt-6 w-full font-bold text-neutral-900 max-md:max-w-full",children:[t.jsx("h2",{className:"text-base tracking-wider max-md:max-w-full",children:"2. Direcci√≥n de env√≠o"}),p.length>0&&t.jsx(t.Fragment,{children:t.jsx(qt,{addresses:p,selected:V,onSelectAddress:ce,setIsModalOpen:G})}),t.jsx("div",{type:"button",className:"text-white bg-green-800 w-full mt-1 p-2 rounded-lg text-center cursor-pointer ",label:"Seleccionar direcci√≥n",onClick:z,children:"Seleccionar direccion de envio "}),t.jsx(Ot,{handlemodalMaps:z,isModalOpen:X,tittle:"Direcci√≥n de env√≠o",children:t.jsx(Rt,{onSelectAddress:S,scriptLoaded:l,handlemodalMaps:z,setCostoEnvio:T,datosFinales:s})}),V<=0&&t.jsxs(t.Fragment,{children:[t.jsxs("p",{className:"mt-2 mb-1 text-base font-light",children:["Destinatario: ",((ee=s==null?void 0:s.address)==null?void 0:ee.fullname)??""]}),t.jsxs("p",{className:"mb-1 text-base font-light",children:["Direccion: ",((te=s.address)==null?void 0:te.fulladdress)??"Sin direccion"]}),t.jsxs("p",{className:"mb-2 text-base font-light",children:["Costo de envio: ",A>0?t.jsxs(t.Fragment,{children:["S/ ",Number(A).toFixed(0)," "]}):"Evaluando"]})]})]}),t.jsxs("section",{className:"flex flex-col mt-6 w-full max-md:max-w-full",children:[t.jsx("h2",{className:"text-base font-bold tracking-wider text-neutral-900 max-md:max-w-full",children:"3. Dedicatoria"}),t.jsx("div",{className:"px-1.5 mt-4 mb-4",children:t.jsx(Lt,{title:"Sin Mensaje",callback:I})}),t.jsx(B,{value:s.dedication.from,label:"De:",type:"text",placeholder:"",handleDatosFinales:m=>{v(c=>({...c,dedication:{...c.dedication,from:m.target.value}}))}}),t.jsx(B,{value:s.dedication.to,label:"Para:",type:"text",placeholder:"",handleDatosFinales:m=>{v(c=>({...c,dedication:{...c.dedication,to:m.target.value}}))}}),!j&&t.jsxs(t.Fragment,{children:[t.jsx(Mr,{title:"Seleccionar Mensaje",options:a,handleOptionChange:P}),t.jsxs("div",{className:"flex flex-col mt-6 w-full max-md:max-w-full",children:[t.jsx("div",{className:"flex flex-wrap gap-2 items-start w-full text-xs tracking-wide max-md:max-w-full",children:t.jsxs("p",{className:"flex-1 shrink basis-0 text-neutral-900 text-opacity-80 text-base",children:["Escribe tu mensaje ",t.jsx("span",{className:"pl-4 opacity-75",children:`${s.dedication.message.split(" ").length} / 60`})]})}),t.jsx("textarea",{style:{overflow:"hidden",resize:"none"},ref:le,className:` shrink gap-2 self-stretch px-6 py-4 mt-2 w-full  h-c
                      text-sm tracking-wide leading-5 rounded-3xl border border-solid border-stone-300
                       text-neutral-900 max-md:px-5 max-md:max-w-full`,value:s.dedication.message,onChange:m=>{const c=m.target.value.split(" "),N=20,W=c.map(K=>K.length>N?K.substring(0,N):K).slice(0,60).join(" ");v(K=>({...K,dedication:{...K.dedication,message:W.slice(0,1500)}})),changetextArea()}})]})]})]})]}),t.jsx("div",{className:"flex flex-col w-full ",children:t.jsxs("section",{className:"flex flex-col mt-6 w-full max-md:max-w-full",children:[t.jsx("h2",{className:"text-base font-bold tracking-wider text-neutral-900 max-md:max-w-full",children:"Tipo de comprobante"}),t.jsxs("div",{className:"flex flex-col justify-center mt-6 w-full max-md:max-w-full",children:[t.jsx(It,{onChange:m=>{b(!1),v(c=>({...c,billing:{...c.billing,type:m}}))}}),t.jsxs("div",{className:"flex flex-col mt-8 w-full max-md:max-w-full",children:[t.jsx(B,{label:`N√∫mero de ${s.billing.type==="boleta"?"Documento de Identidad ":"RUC"}`,placeholder:`N√∫mero de ${s.billing.type==="boleta"?"Documento de Identidad ":"RUC"}`,required:!0,type:"number",maxLength:s.billing.type==="boleta"?8:11,value:s.billing.type==="boleta"?s.billing.dni:s.billing.ruc,handleDatosFinales:m=>{s.billing.type==="boleta"?v(c=>({...c,billing:{...c.billing,ruc:"",dni:m.target.value}})):v(c=>({...c,billing:{...c.billing,dni:"",ruc:m.target.value}})),b(!1),E(m.target.value)}}),t.jsx(B,{name:"razonSocial",label:s.billing.type=="boleta"?"Nombre":"Raz√≥n Social",placeholder:"Ingrese una nombre",value:s.billing.name,required:!0,disabled:$,handleDatosFinales:m=>{v(c=>({...c,billing:{...c.billing,name:m.target.value}}))}}),s.billing.type==="boleta"&&t.jsx(t.Fragment,{children:t.jsx(B,{name:"lastname",label:"Apellido",value:s.billing.lastname,placeholder:"Ingrese su apellido",required:!0,disabled:$,handleDatosFinales:m=>{v(c=>({...c,billing:{...c.billing,lastname:m.target.value}}))}})}),s.billing.type!=="boleta"&&t.jsx(t.Fragment,{children:t.jsx(B,{value:s.billing.address,label:"Direcci√≥n Fiscal",placeholder:"Ingrese una direcci√≥n",required:!0,handleDatosFinales:m=>{v(c=>({...c,billing:{...c.billing,address:m.target.value}}))}})}),t.jsx(B,{value:s.billing.email,label:"Correo electr√≥nico",type:"email",placeholder:"Ingrese un correo",required:!0,handleDatosFinales:m=>{v(c=>({...c,billing:{...c.billing,email:m.target.value}}))}})]}),t.jsxs("div",{className:"flex flex-row items-center gap-4 justify-center mt-8 w-full text-base font-bold tracking-wide whitespace-nowrap max-md:max-w-full",children:[t.jsx(Ce,{variant:"primary",type:"button",callback:ve,children:"Continuar"}),t.jsx(Ce,{href:"/carrito",variant:"secondary",children:"Regresar"})]})]})]})})]})]}),t.jsx("input",{type:"file",className:"hidden",id:"capturaTransferencia"})]}),t.jsx(kt,{id:"modalmap",showModal:U,setshowModal:be,width:"w2xl",children:t.jsx(Lr,{telefono:f.whatsapp,texto:f.mensaje_whatsapp,datosFinales:s,historicoCupones:i,carrito:O,costoEnvio:A,setIsModalOpen:G,points:o})})]})};Ft((e,r)=>{St(e).render(t.jsx($r,{...r}))});
