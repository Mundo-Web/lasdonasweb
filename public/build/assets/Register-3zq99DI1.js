var W=Object.defineProperty;var B=(n,r,i)=>r in n?W(n,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[r]=i;var A=(n,r,i)=>(B(n,typeof r!="symbol"?r+"":r,i),i);import{j as o}from"./Example-zgwdEd5i.js";import{c as G}from"./ReactAppend-mx8-aehl.js";import{r as d}from"./useOutsideClick-TT1qJ6UJ.js";import{J}from"./JSEncrypt-jwo8Dr6z.js";import{C as K}from"./CreateReactScript-VVPwJ0HX.js";import{m as _}from"./main-Vi8adC25.js";import{P as u}from"./index-VFMbf6KQ.js";import{h as Q}from"./hoist-non-react-statics.cjs-YYlJ_Lof.js";import{a as X}from"./CreateReactScript-scAdndyK.js";import{S as V}from"./Profile-6kVS_QzG.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";/* empty css              */import"./index-XJuWVQ-l.js";import"./storage-zp2nPsZU.js";import"./axios-_sX4vCAy.js";class F{}A(F,"login",async r=>{try{const{status:i,result:e}=await _.Fetch("./api/login",{method:"POST",body:JSON.stringify(r)});if(!i)throw new Error((e==null?void 0:e.message)||"Error al iniciar sesion");return _.Notify.add({icon:"/images/svg/Boost.svg",title:"Operacion correcta",body:"Se inicio sesion correctamente"}),!0}catch(i){return _.Notify.add({icon:"/images/svg/Boost.svg",title:"Error",body:i.message,type:"danger"}),!1}}),A(F,"signup",async r=>{try{const{status:i,result:e}=await _.Fetch("./api/signup",{method:"POST",body:JSON.stringify(r)});if(!i)throw new Error((e==null?void 0:e.message)||"Error al registrar el usuario");return _.Notify.add({icon:"/assets/img/logo-login.svg",title:"Operacion correcta",body:"Se registro el usuario correctamente"}),e.data}catch(i){return _.Notify.add({icon:"/assets/img/logo-login.svg",title:"Error",body:i.message,type:"danger"}),null}});var Y=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl","isolated"];function U(){return U=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}return n},U.apply(this,arguments)}function Z(n,r){if(n==null)return{};var i={},e=Object.keys(n),t,c;for(c=0;c<e.length;c++)t=e[c],!(r.indexOf(t)>=0)&&(i[t]=n[t]);return i}function P(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function ee(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,q(n,r)}function q(n,r){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(n,r)}var T=function(n){ee(r,n);function r(){var e;return e=n.call(this)||this,e.handleExpired=e.handleExpired.bind(P(e)),e.handleErrored=e.handleErrored.bind(P(e)),e.handleChange=e.handleChange.bind(P(e)),e.handleRecaptchaRef=e.handleRecaptchaRef.bind(P(e)),e}var i=r.prototype;return i.getCaptchaFunction=function(t){return this.props.grecaptcha?this.props.grecaptcha.enterprise?this.props.grecaptcha.enterprise[t]:this.props.grecaptcha[t]:null},i.getValue=function(){var t=this.getCaptchaFunction("getResponse");return t&&this._widgetId!==void 0?t(this._widgetId):null},i.getWidgetId=function(){return this.props.grecaptcha&&this._widgetId!==void 0?this._widgetId:null},i.execute=function(){var t=this.getCaptchaFunction("execute");if(t&&this._widgetId!==void 0)return t(this._widgetId);this._executeRequested=!0},i.executeAsync=function(){var t=this;return new Promise(function(c,y){t.executionResolve=c,t.executionReject=y,t.execute()})},i.reset=function(){var t=this.getCaptchaFunction("reset");t&&this._widgetId!==void 0&&t(this._widgetId)},i.forceReset=function(){var t=this.getCaptchaFunction("reset");t&&t()},i.handleExpired=function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)},i.handleErrored=function(){this.props.onErrored&&this.props.onErrored(),this.executionReject&&(this.executionReject(),delete this.executionResolve,delete this.executionReject)},i.handleChange=function(t){this.props.onChange&&this.props.onChange(t),this.executionResolve&&(this.executionResolve(t),delete this.executionReject,delete this.executionResolve)},i.explicitRender=function(){var t=this.getCaptchaFunction("render");if(t&&this._widgetId===void 0){var c=document.createElement("div");this._widgetId=t(c,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge,isolated:this.props.isolated}),this.captcha.appendChild(c)}this._executeRequested&&this.props.grecaptcha&&this._widgetId!==void 0&&(this._executeRequested=!1,this.execute())},i.componentDidMount=function(){this.explicitRender()},i.componentDidUpdate=function(){this.explicitRender()},i.handleRecaptchaRef=function(t){this.captcha=t},i.render=function(){var t=this.props;t.sitekey,t.onChange,t.theme,t.type,t.tabindex,t.onExpired,t.onErrored,t.size,t.stoken,t.grecaptcha,t.badge,t.hl,t.isolated;var c=Z(t,Y);return d.createElement("div",U({},c,{ref:this.handleRecaptchaRef}))},r}(d.Component);T.displayName="ReCAPTCHA";T.propTypes={sitekey:u.string.isRequired,onChange:u.func,grecaptcha:u.object,theme:u.oneOf(["dark","light"]),type:u.oneOf(["image","audio"]),tabindex:u.number,onExpired:u.func,onErrored:u.func,size:u.oneOf(["compact","normal","invisible"]),stoken:u.string,hl:u.string,badge:u.oneOf(["bottomright","bottomleft","inline"]),isolated:u.bool};T.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};function H(){return H=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}return n},H.apply(this,arguments)}function te(n,r){if(n==null)return{};var i={},e=Object.keys(n),t,c;for(c=0;c<e.length;c++)t=e[c],!(r.indexOf(t)>=0)&&(i[t]=n[t]);return i}function re(n,r){n.prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r}var h={},ne=0;function oe(n,r){return r=r||{},function(e){var t=e.displayName||e.name||"Component",c=function(m){re(v,m);function v(x,s){var a;return a=m.call(this,x,s)||this,a.state={},a.__scriptURL="",a}var g=v.prototype;return g.asyncScriptLoaderGetScriptLoaderID=function(){return this.__scriptLoaderID||(this.__scriptLoaderID="async-script-loader-"+ne++),this.__scriptLoaderID},g.setupScriptURL=function(){return this.__scriptURL=typeof n=="function"?n():n,this.__scriptURL},g.asyncScriptLoaderHandleLoad=function(s){var a=this;this.setState(s,function(){return a.props.asyncScriptOnLoad&&a.props.asyncScriptOnLoad(a.state)})},g.asyncScriptLoaderTriggerOnScriptLoaded=function(){var s=h[this.__scriptURL];if(!s||!s.loaded)throw new Error("Script is not loaded.");for(var a in s.observers)s.observers[a](s);delete window[r.callbackName]},g.componentDidMount=function(){var s=this,a=this.setupScriptURL(),l=this.asyncScriptLoaderGetScriptLoaderID(),p=r,L=p.globalName,R=p.callbackName,O=p.scriptId;if(L&&typeof window[L]<"u"&&(h[a]={loaded:!0,observers:{}}),h[a]){var w=h[a];if(w&&(w.loaded||w.errored)){this.asyncScriptLoaderHandleLoad(w);return}w.observers[l]=function(f){return s.asyncScriptLoaderHandleLoad(f)};return}var E={};E[l]=function(f){return s.asyncScriptLoaderHandleLoad(f)},h[a]={loaded:!1,observers:E};var b=document.createElement("script");b.src=a,b.async=!0;for(var I in r.attributes)b.setAttribute(I,r.attributes[I]);O&&(b.id=O);var C=function(j){if(h[a]){var S=h[a],N=S.observers;for(var k in N)j(N[k])&&delete N[k]}};R&&typeof window<"u"&&(window[R]=function(){return s.asyncScriptLoaderTriggerOnScriptLoaded()}),b.onload=function(){var f=h[a];f&&(f.loaded=!0,C(function(j){return R?!1:(j(f),!0)}))},b.onerror=function(){var f=h[a];f&&(f.errored=!0,C(function(j){return j(f),!0}))},document.body.appendChild(b)},g.componentWillUnmount=function(){var s=this.__scriptURL;if(r.removeOnUnmount===!0)for(var a=document.getElementsByTagName("script"),l=0;l<a.length;l+=1)a[l].src.indexOf(s)>-1&&a[l].parentNode&&a[l].parentNode.removeChild(a[l]);var p=h[s];p&&(delete p.observers[this.asyncScriptLoaderGetScriptLoaderID()],r.removeOnUnmount===!0&&delete h[s])},g.render=function(){var s=r.globalName,a=this.props;a.asyncScriptOnLoad;var l=a.forwardedRef,p=te(a,["asyncScriptOnLoad","forwardedRef"]);return s&&typeof window<"u"&&(p[s]=typeof window[s]<"u"?window[s]:void 0),p.ref=l,d.createElement(e,p)},v}(d.Component),y=d.forwardRef(function(m,v){return d.createElement(c,H({},m,{forwardedRef:v}))});return y.displayName="AsyncScriptLoader("+t+")",y.propTypes={asyncScriptOnLoad:u.func},Q(y,e)}}var z="onloadcallback",ie="grecaptcha";function M(){return typeof window<"u"&&window.recaptchaOptions||{}}function ae(){var n=M(),r=n.useRecaptchaNet?"recaptcha.net":"www.google.com";return n.enterprise?"https://"+r+"/recaptcha/enterprise.js?onload="+z+"&render=explicit":"https://"+r+"/recaptcha/api.js?onload="+z+"&render=explicit"}const se=oe(ae,{callbackName:z,globalName:ie,attributes:M().nonce?{nonce:M().nonce}:{}})(T),ce=({PUBLIC_RSA_KEY:n,RECAPTCHA_SITE_KEY:r,token:i,terms:e="Terminos y condiciones",APP_URL:t})=>{document.title="Registro | Las Doñas";const c=new J;c.setPublicKey(n),console.log(n);const[y,m]=d.useState(!0),[v,g]=d.useState(null),[x,s]=d.useState(!1),a=d.useRef(),l=d.useRef(),p=d.useRef(),L=d.useRef(),R=d.useRef(),O=d.useRef(),w=d.useRef(),E=d.useRef(),b=d.useRef();d.useEffect(()=>{m(!1)},[null]);const I=async j=>{j.preventDefault(),m(!0);const S=O.current.value,N=w.current.value;if(console.log(S),S!=N)return V.fire({icon:"warning",title:"Error",text:"Las contraseñas no coinciden",confirmButtonText:"Ok"});if(!v)return V.fire({icon:"warning",title:"Error",text:"Por favor, complete el captcha",confirmButtonText:"Ok"});const k={document_type:$(a.current).val(),document_number:l.current.value,name:p.current.value,lastname:L.current.value,email:R.current.value,password:c.encrypt(S),confirmation:c.encrypt(N),terms:E.current.checked,captcha:v,_token:i};console.log(k);const D=await F.signup(k);if(!D)return m(!1);D&&(location.href=`./confirm-email/${D}`),m(!1)},C=j=>{l.current.value="",s(!1)};return o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex flex-row md:h-screen justify-center h-screen font-b_slick_bold min-h-[869px]",children:[o.jsx("div",{className:"basis-1/2 hidden md:block font-poppins",children:o.jsx("div",{class:"basis-1/2 hidden md:block ",children:o.jsx("div",{className:"bg-cover bg-center bg-no-repeat w-full h-full",children:o.jsx("img",{src:"/img_donas/login.png",alt:"",className:"w-full h-full object-cover"})})})}),o.jsx("div",{className:"w-full md:basis-1/2  text-[#151515] flex justify-center items-center  ",children:o.jsx("div",{className:"w-5/6 flex flex-col gap-5 py-5",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"text-center mb-4",children:o.jsx("h4",{className:"text-uppercase mt-0 font-bold",children:"Registrate"})}),o.jsxs("form",{onSubmit:I,className:"flex flex-col gap-4",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("label",{htmlFor:"document_type",className:"form-label",children:["Tipo documento ",o.jsx("b",{className:"text-danger",children:"*"})]}),o.jsxs("select",{className:'relative my-auto bg-transparent  outline-none focus:border-none  gap-10 justify-between items-center px-6  w-full font-medium leading-tight rounded-3xl border py-4 border-orange-400 border-solid " type="text" id="document_number" placeholder="Ingrese su documento"',name:"",id:"",ref:a,onChange:C,required:!0,children:[o.jsx("option",{value:"DNI",children:"DNI - Documento Nacional de Identidad"}),o.jsx("option",{value:"CE",children:"CE - Carnet de Extranjeria"})]})]}),o.jsx("div",{className:"flex flex-col",children:o.jsx("input",{ref:l,className:"relative my-auto bg-transparent  outline-none focus:border-none  gap-10 justify-between items-center px-6  w-full font-medium leading-tight rounded-3xl border py-4 border-orange-400 border-solid ",type:"text",id:"document_number",placeholder:"Ingrese su documento",required:!0})}),o.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[o.jsx("div",{className:"flex flex-col col-span-2",children:o.jsx("input",{ref:p,className:"relative my-auto bg-transparent  outline-none focus:border-none  gap-10 justify-between items-center px-6  w-full font-medium leading-tight rounded-3xl border py-4 border-orange-400 border-solid ",type:"text",id:"name",placeholder:"Ingrese su nombre",required:!0})}),o.jsx("div",{className:"flex flex-col col-span-2",children:o.jsx("input",{ref:L,className:"relative my-auto bg-transparent  outline-none focus:border-none  gap-10 justify-between items-center px-6  w-full font-medium leading-tight rounded-3xl border py-4 border-orange-400 border-solid ",type:"text",id:"lastname",placeholder:"Ingrese sus apellidos",required:!0})})]}),o.jsx("div",{className:"flex flex-col",children:o.jsx("input",{ref:R,className:"relative my-auto bg-transparent  outline-none focus:border-none  gap-10 justify-between items-center px-6  w-full font-medium leading-tight rounded-3xl border py-4 border-orange-400 border-solid ",type:"email",id:"email",required:!0,placeholder:"Ingrese su correo electronico"})}),o.jsx("div",{className:"flex flex-col",children:o.jsx("input",{ref:O,className:"relative my-auto bg-transparent  outline-none focus:border-none  gap-10 justify-between items-center px-6  w-full font-medium leading-tight rounded-3xl border py-4 border-orange-400 border-solid ",type:"password",required:!0,id:"password",placeholder:"Ingrese su contraseña"})}),o.jsx("div",{className:"flex flex-col",children:o.jsx("input",{ref:w,className:"relative my-auto bg-transparent  outline-none focus:border-none  gap-10 justify-between items-center px-6  w-full font-medium leading-tight rounded-3xl border py-4 border-orange-400 border-solid ",type:"password",required:!0,id:"confirmation",placeholder:"Confirme su contraseña"})}),o.jsx("div",{className:"flex flex-col",children:o.jsxs("div",{className:"form-check mx-auto",style:{width:"max-content"},children:[o.jsx("input",{ref:E,type:"checkbox",className:"form-check-input",id:"checkbox-signup",required:!0}),o.jsxs("label",{className:"form-check-label",htmlFor:"checkbox-signup",children:["Acepto los",o.jsx("a",{href:"#terms",className:"ms-1 text-blue",onClick:()=>$(b.current).modal("show"),children:"terminos y condiciones"})]})]})}),o.jsx(se,{className:"m-auto mb-3",sitekey:r,onChange:g,style:{display:"block",width:"max-content"}}),o.jsx("div",{className:"mb-0 text-center d-grid",children:o.jsx("button",{className:"text-white bg-green-800 w-full py-4 rounded-3xl cursor-pointer font-light font-Inter_Medium tracking-wide",type:"submit",disabled:y,children:y?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fa fa-spinner fa-spin"})," Verificando"]}):"Registrarme"})})]}),o.jsx("div",{className:"row mt-3",children:o.jsx("div",{className:"col-12 text-center",children:o.jsxs("p",{className:"text-muted",children:["Ya tienes una cuenta? ",o.jsx(X,{href:"/login",className:"text-dark ms-1",children:o.jsx("b",{children:"Iniciar sesion"})})]})})})]})})})]})})};K((n,r)=>{G(n).render(o.jsx(ce,{...r}))});
