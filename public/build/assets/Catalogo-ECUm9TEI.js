import{j as e}from"./Example-MplZTE2r.js";import{c as X}from"./ReactAppend-TnsKwt4L.js";import{r as o}from"./index-TT1qJ6UJ.js";import{C as Y}from"./CreateReactScript-KXQ71xJI.js";import{t as Z}from"./truncateText-C3yxPslF.js";import{a as ee}from"./axios-_sX4vCAy.js";/* empty css             */import"./index-XJuWVQ-l.js";import"./index-7vsPyIck.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-OtmPHjwu.js";function te({item:c,url:d}){return console.log(c),e.jsxs("div",{className:"bg-[#E8EDDE] h-[198px] flex flex-col rounded-3xl p-4",children:[e.jsx("img",{src:`${d}/${c.icono}`,alt:"",className:"w-12 h-12"}),e.jsx("h2",{className:"text-[24px] font-semibold h-[80px] mt-2",children:c.titulo}),e.jsx("p",{className:"text-[14px] ",children:Z(c.descripcion,70)})]})}const se=({categorias:c,selected_category:d,categoria:u,url_env:x,beneficios:I})=>{let b=new AbortController;const[S,_]=o.useState([]),[s,F]=o.useState(d?{category_id:[d]}:{}),[ie,D]=o.useState(0),[f,N]=o.useState(1),[q,P]=o.useState("Cargar mas productos"),[h,E]=o.useState(""),[L,B]=o.useState(!0),[y,k]=o.useState(!1),[O,H]=o.useState(""),[$,J]=o.useState(""),[C,z]=o.useState(!1),[g,j]=o.useState({categories:d?[{id:`${u.id}`,name:u.name}]:[],priceOrder:""}),w=o.useRef({}),R=o.useRef({}),G=()=>{z(!C)};o.useState(!1),o.useRef(!1);const K=(t=[],r)=>{const i=[];return t.forEach((a,m)=>{m==0?i.push(a):i.push(r,a)}),i},M=()=>{k(!y)},Q=(t,r)=>t?t.length<=r?t:t.substring(0,r)+"...":"",U=t=>{z(!C);const r=t.target.id,i=R.current[r].querySelector("span").textContent;J(i),!g.categories.find(a=>a.id==r)&&(j(a=>({...a,categories:[...a.categories,{id:r,name:i}]})),F(a=>({...a,category_id:[...s.category_id,r]})))};o.useEffect(()=>{N(1),v()},[s]),o.useEffect(()=>{v()},[f]);const T=t=>{k(!y);const r=t.target.id,i=w.current[r].querySelector("span").textContent;H(i),E(a=>t.target.value),j(a=>({...a,priceOrder:t.target.value}))};o.useEffect(()=>{N(1),v()},[h]);const W=t=>{j(r=>({...r,categories:r.categories.filter(i=>i.id!==t)})),F(r=>({...s,category_id:s.category_id.filter(i=>i!==t)}))},V=()=>{j(t=>({...t,priceOrder:""})),E("")},v=async()=>{b.abort("some"),b=new AbortController;let t=b.signal;P("Cargando ...");const r=[];let i=[];if(h&&(h==="price_high"?i.push({selector:"products.preciofiltro",desc:!0}):h==="price_low"?i.push({selector:"products.preciofiltro",desc:!1}):i.push({selector:"products.created_at",desc:!0})),(s.maxPrice||s.minPrice)&&(s.maxPrice&&s.minPrice?r.push([[["preciofiltro",">=",s.minPrice]],"and",[["preciofiltro","<=",s.maxPrice]]]):s.minPrice?r.push([["precio",">=",s.minPrice],"or",["descuento",">=",s.minPrice]]):s.maxPrice&&r.push([["precio","<=",s.maxPrice],"or",["descuento","<=",s.maxPrice]])),s.collections&&s.collections.length>0){const n=[];s.collections.forEach((l,p)=>{p===0?n.push(["collection_id","=",l]):n.push("or",["collection_id","=",l])}),r.push(n)}if(s.sizes&&s.sizes.length>0){const n=[];s.sizes.forEach((l,p)=>{p===0?n.push(["combinaciones.talla_id","=",l]):n.push("or",["combinaciones.talla_id","=",l])}),r.push(n)}if(s.colors&&s.colors.length>0){const n=[];s.colors.forEach((l,p)=>{p===0?n.push(["combinaciones.color_id","=",l]):n.push("or",["combinaciones.color_id","=",l])}),r.push(n)}if(s.category_id&&s.category_id.length>0){const n=[];s.category_id.forEach((l,p)=>{p===0?n.push(["categoria_id","=",l]):n.push("or",["categoria_id","=",l])}),r.push(n)}const a=await ee.post("/api/products/paginate",{requireTotalCount:!0,filter:K([...r,["products.visible","=",!0]],"and"),take:12,skip:12*(f-1),sort:i},{headers:{"Content-Type":"application/json"},signal:t}),{data:m,totalCount:A}=a.data;f==1?_(m??[]):_([...S,...m]),P("Cargar más modelos"),D(A??0),12*f>=A&&B(!1)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mb-24",children:e.jsxs("div",{className:"mt-14 px-[8%]",children:[e.jsxs("div",{className:"text-[#FE4A11]",children:[" ",`Inicio / ${u.name} `]}),e.jsx("div",{className:"text-[44px] font-bold text-[#112212] -mt-3",children:u.name}),e.jsxs("div",{className:"text-[#112212] opacity-80",children:[u.description," "]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 mt-12 gap-10",children:[e.jsx("select",{className:"rounded-md p-2 px-4 font-bold flex items-baseline text-[18px]",name:"",id:"",children:e.jsx("option",{value:"",children:"Tipo Flor"})}),e.jsxs("div",{className:"dropdown w-full order-2 md:order-4",children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-2 bg-[#F5F5F5]",onClick:G,children:$||"Categoria"}),C&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:c.map((t,r)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:U}),e.jsx("label",{ref:i=>R.current[t.id]=i,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]}))})]}),e.jsxs("div",{className:"dropdown w-full order-2 md:order-4",children:[e.jsx("div",{className:"input-box focus:outline-none  font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-2 bg-[#F5F5F5]",onClick:M,children:O||"Ordenar por"}),y&&e.jsxs("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms]",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:[e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id11",className:"radio",value:"price_high",onChange:T}),e.jsx("label",{ref:t=>w.current.id11=t,htmlFor:"id11",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más alto"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id12",className:"radio",value:"price_low",onChange:T}),e.jsx("label",{ref:t=>w.current.id12=t,htmlFor:"id12",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más bajo"})})]})]})]})]}),e.jsxs("div",{className:"flex flex-row gap-4 mt-7",children:[g.categories.map((t,r)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] border-2 font-bold text-[12px] rounded-xl shadow-lg flex flex-row items-center justify-center px-2",onClick:()=>W(`${t.id}`),children:["Categoria - ",t.name,e.jsx("img",{src:`${x}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),g.priceOrder&&(g.priceOrder==="price_high"?e.jsxs("div",{className:" cursor-pointer text-[#112212] border-2 font-bold text-[12px] rounded-xl shadow-lg flex flex-row items-center justify-center px-2",onClick:V,children:["Orden - Ascendente",e.jsx("img",{src:`${x}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}):e.jsxs("div",{className:"cursor-pointer text-[#112212] border-2 font-bold text-[12px] rounded-xl shadow-lg flex flex-row items-center justify-center px-2",onClick:V,children:["Orden - Descendente",e.jsx("img",{src:`${x}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}))]}),e.jsx("div",{className:"grid grid-cols-4 gap-5 mt-16",children:S.map((t,r)=>e.jsxs("div",{className:"  h-[400px] mt-2",children:[t.images.map((i,a)=>i.caratula===1&&e.jsxs("a",{href:`/producto/${t.id}`,children:[e.jsx("img",{className:" h-[280px] object-cover",src:i.name_imagen?`${x}/${i.name_imagen}`:"images/img/noimagen.jpg",alt:"Producto",onError:m=>{m.target.src=`${x}/images/img/noimagen.jpg`}},a)," "]},a)),e.jsxs("div",{className:"flex flex-col mt-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-2 ",children:[e.jsxs("h2",{className:"text-[16px] font-bold text-[#112212]",children:[" ",t.producto]}),e.jsx("p",{className:"text-[#112212] opacity-80 text-[14px] h-10",children:Q(t.extract,80)})]}),e.jsx("span",{className:"text-[16px] font-bold text-[#112212]",children:t.descuento>0?e.jsxs(e.Fragment,{children:[t.descuento," - ",e.jsx("span",{className:"text-[14px] font-bold text-[#112212] line-through opacity-55",children:t.precio})]}):t.precio})]})]}))}),e.jsx("div",{className:"flex flex-row w-full items-center justify-center mt-12",children:L&&e.jsx("button",{type:"button",onClick:()=>N(f+1),className:"rounded-full border-2 bg-white shadow-xl border-[#336234] text-[#336234] p-2 px-3 font-bold",children:q})}),e.jsx("div",{className:"grid grid-cols-4 gap-7 mt-16",children:I.map((t,r)=>e.jsx(te,{item:t,url:x}))})]})})})};Y((c,d)=>{X(c).render(e.jsx(se,{...d}))});
