import{j as e}from"./Example-zgwdEd5i.js";import{c as U}from"./ReactAppend-mx8-aehl.js";import{r as l}from"./useOutsideClick-TT1qJ6UJ.js";import{C as X}from"./CreateReactScript-BXBBo-c3.js";import{S as Z}from"./react-select.esm-FGKTizt7.js";import{a as ee}from"./axios-_sX4vCAy.js";/* empty css             */import"./index-XJuWVQ-l.js";import{P as te}from"./ProductCard-SKXuSLVk.js";import"./index-38suPYpT.js";import"./_commonjsHelpers-4gQjN7DL.js";import"./CreateReactScript-MzJplI4M.js";import"./storage-zp2nPsZU.js";import"./setPrototypeOf-7MT-VylK.js";import"./floating-ui.dom-KYqStz1f.js";const se={control:(s,i)=>({...s,backgroundColor:"#F8F8F8",borderRadius:"12px",width:"100%",paddingTop:"8px",paddingBottom:"8px",marginBottom:"6px",borderColor:(i.isFocused,"#EFEFEF"),boxShadow:i.isFocused?"0 8px 16px rgba(0, 0, 0, 0.2)":"0 4px 8px rgba(0, 0, 0, 0.1)","&:hover":{borderColor:"#EFEFEF"},minHeight:"48px"}),option:(s,i)=>({...s,color:(i.isSelected,"#112212"),paddingTop:"13px",paddingBottom:"13px",backgroundColor:i.isSelected?"#EFEFEF":"#F9FAFB","&:hover":{backgroundColor:(i.isSelected,"#EFEFEF"),color:(i.isSelected,"#112212")},padding:"10px 20px"}),menu:s=>({...s,marginTop:"0px",paddingTop:"0px",borderRadius:"12px",maxHeight:"150px",overflowY:"auto"}),dropdownIndicator:s=>({...s,color:"#112212","&:hover":{color:"#112212"}}),indicatorSeparator:()=>({display:"none"}),singleValue:s=>({...s,color:"#112212"}),placeholder:s=>({...s,color:"#112212",fontWeight:"bold",fontSize:"16px"})},A=({title:s,handleOptionChange:i,options:p=[]})=>(console.log(p),e.jsx(Z,{className:"font-poppins_regular font-bold text-lg w-full z-0",styles:se,options:p.map(x=>({value:x.id,label:x.name})),placeholder:s,filterOption:()=>!0,isSearchable:!1,onChange:i})),re=(s,i)=>s?s.length<=i?s:s.substring(0,i)+"...":"";function oe({item:s,url:i}){return console.log(s),e.jsxs("div",{className:"flex flex-col p-4 rounded-3xl bg-[#E8EDDE] min-w-[240px]",children:[e.jsx("img",{src:`${i}/${s.icono}`,alt:"",className:"w-12 h-12 object-contain aspect-square"}),e.jsxs("div",{class:"flex flex-col mt-4 w-full",children:[e.jsx("h2",{className:"text-2xl tracking-wide text-zinc-800 ",children:s.titulo}),e.jsx("p",{className:"mt-2 text-base tracking-wide leading-5 text-neutral-600 font-b_slick_regular",children:re(s.descripcion,70)})]})]})}const ie=({categorias:s,selected_category:i,categoria:p,url_env:x,beneficios:B})=>{let j=new AbortController;const[v,S]=l.useState([]),[r,E]=l.useState(i?{category_id:[i]}:{}),[le,q]=l.useState(0),[u,w]=l.useState(1),[D,_]=l.useState("Cargar mas productos"),[g,k]=l.useState(""),[H,L]=l.useState(!0),[C,P]=l.useState(!1),[O,J]=l.useState(""),[z,M]=l.useState(""),[y,R]=l.useState(!1),[f,h]=l.useState({categories:i?[{id:`${p.id}`,name:p.name}]:[],priceOrder:""}),F=l.useRef({}),$=l.useRef({}),W=()=>{R(!y)};l.useState(!1),l.useRef(!1);const Y=(t=[],o)=>{const a=[];return t.forEach((c,b)=>{b==0?a.push(c):a.push(o,c)}),a},G=()=>{P(!C)},K=t=>{R(!y);const o=t.target.id,a=$.current[o].querySelector("span").textContent;M(a),!f.categories.find(c=>c.id==o)&&(h(c=>({...c,categories:[...c.categories,{id:o,name:a}]})),E(c=>({...c,category_id:[...r.category_id,o]})))};l.useEffect(()=>{w(1),N()},[r]),l.useEffect(()=>{N()},[u]);const T=t=>{P(!C);const o=t.target.id,a=F.current[o].querySelector("span").textContent;J(a),k(c=>t.target.value),h(c=>({...c,priceOrder:t.target.value}))};l.useEffect(()=>{w(1),N()},[g]);const Q=t=>{h(o=>({...o,categories:o.categories.filter(a=>a.id!==t)})),E(o=>({...r,category_id:r.category_id.filter(a=>a!==t)}))},I=()=>{h(t=>({...t,priceOrder:""})),k("")},N=async()=>{j.abort("some"),j=new AbortController;let t=j.signal;_("Cargando ...");const o=[];let a=[];if(g&&(g==="price_high"?a.push({selector:"products.preciofiltro",desc:!0}):g==="price_low"?a.push({selector:"products.preciofiltro",desc:!1}):a.push({selector:"products.created_at",desc:!0})),(r.maxPrice||r.minPrice)&&(r.maxPrice&&r.minPrice?o.push([[["preciofiltro",">=",r.minPrice]],"and",[["preciofiltro","<=",r.maxPrice]]]):r.minPrice?o.push([["precio",">=",r.minPrice],"or",["descuento",">=",r.minPrice]]):r.maxPrice&&o.push([["precio","<=",r.maxPrice],"or",["descuento","<=",r.maxPrice]])),r.collections&&r.collections.length>0){const n=[];r.collections.forEach((d,m)=>{m===0?n.push(["collection_id","=",d]):n.push("or",["collection_id","=",d])}),o.push(n)}if(r.sizes&&r.sizes.length>0){const n=[];r.sizes.forEach((d,m)=>{m===0?n.push(["combinaciones.talla_id","=",d]):n.push("or",["combinaciones.talla_id","=",d])}),o.push(n)}if(r.colors&&r.colors.length>0){const n=[];r.colors.forEach((d,m)=>{m===0?n.push(["combinaciones.color_id","=",d]):n.push("or",["combinaciones.color_id","=",d])}),o.push(n)}if(r.category_id&&r.category_id.length>0){const n=[];r.category_id.forEach((d,m)=>{m===0?n.push(["categoria_id","=",d]):n.push("or",["categoria_id","=",d])}),o.push(n)}const c=await ee.post("/api/products/paginate",{requireTotalCount:!0,filter:Y([...o,["products.visible","=",!0]],"and"),take:12,skip:12*(u-1),sort:a},{headers:{"Content-Type":"application/json"},signal:t}),{data:b,totalCount:V}=c.data;u==1?S(b??[]):S([...v,...b]),_("Cargar más modelos"),q(V??0),12*u>=V&&L(!1)};return e.jsx(e.Fragment,{children:e.jsx("section",{className:"mb-24",children:e.jsxs("div",{className:"mt-14 px-[5%] lg:px-[8%] font-b_slick_bold",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"text-[#FE4A11] text-base tracking-normal uppercase",children:[" ",`Inicio / ${p.name??"Todas las categorias"} `]}),e.jsx("div",{className:"text-3xl lg:text-5xl font-bold text-[#112212] uppercase tracking-wider",children:p.name}),e.jsx("div",{className:"text-[#112212] opacity-80 font-b_slick_regular text-lg",children:p.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 mt-4 lg:mt-12 gap-4 lg:gap-10",children:[e.jsxs("div",{className:"dropdown w-full",children:[e.jsx("div",{className:"input-box focus:outline-none font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:W,children:z||"Categoria"}),y&&e.jsx("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms] overflow-y-auto",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:s.map((t,o)=>e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:t.id,className:"radio",value:"price_high",onChange:K}),e.jsx("label",{ref:a=>$.current[t.id]=a,htmlFor:t.id,className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:t.name})})]}))})]}),e.jsxs("div",{className:"dropdown w-full",children:[e.jsx("div",{className:"input-box focus:outline-none  font-bold text-text16 md:text-text20 mr-20 shadow-md px-4 py-6 bg-[#F5F5F5]",onClick:G,children:O||"Ordenar por"}),C&&e.jsxs("div",{className:"list z-[100] animate-fade-down animate-duration-[2000ms]",style:{maxHeight:"150px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 1px 2px 0px, rgba(0, 0, 0, 0.1) 0px 1px 3px 1px"},children:[e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id11",className:"radio",value:"price_high",onChange:T}),e.jsx("label",{ref:t=>F.current.id11=t,htmlFor:"id11",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más alto"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("input",{type:"radio",name:"drop1",id:"id12",className:"radio",value:"price_low",onChange:T}),e.jsx("label",{ref:t=>F.current.id12=t,htmlFor:"id12",className:"font-regularDisplay text-text20 hover:font-bold md:duration-100 hover:text-white ordenar",children:e.jsx("span",{className:"name inline-block w-full",children:"Precio más bajo"})})]})]})]}),console.log(s),e.jsx(A,{options:s,title:"Categorías"}),e.jsx(A,{title:"Ordenar por"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-7",children:[f.categories.map((t,o)=>e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:()=>Q(`${t.id}`),children:["Categoria - ",t.name,e.jsx("img",{src:`${x}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]})),f.priceOrder&&(f.priceOrder==="price_high"?e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:I,children:["Orden - Ascendente",e.jsx("img",{src:`${x}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}):e.jsxs("div",{className:"cursor-pointer text-[#112212] text-sm rounded-xl shadow-lg flex flex-row items-center justify-center px-4 py-2",onClick:I,children:["Orden - Descendente",e.jsx("img",{src:`${x}/img_donas/x.png`,type:"icon",alt:"",className:"pl-2  flex items-center justify-center"})]}))]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mt-16",children:v.map((t,o)=>e.jsx(te,{...t},`product-${o}`))}),e.jsx("div",{className:"flex flex-row w-full items-center justify-center mt-12",children:H&&e.jsx("button",{type:"button",onClick:()=>w(u+1),className:"rounded-full border-2 bg-white shadow-xl border-[#336234] text-[#336234] p-2 px-3 font-bold",children:D})}),e.jsx("div",{className:"mt-14 font-b_slick_bold w-full",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-7 justify-between",children:B.map((t,o)=>e.jsx(oe,{item:t,url:x}))})})]})})})};X((s,i)=>{U(s).render(e.jsx(ie,{...i}))});
